(function(){var require=function(file,cwd){var resolved=require.resolve(file,cwd||"/");var mod=require.modules[resolved];if(!mod)throw new Error("Failed to resolve module "+file+", tried "+resolved);var cached=require.cache[resolved];var res=cached?cached.exports:mod();return res};require.paths=[];require.modules={};require.cache={};require.extensions=[".js",".coffee",".json"];require._core={assert:true,events:true,fs:true,path:true,vm:true};require.resolve=function(){return function(x,cwd){if(!cwd)cwd="/";if(require._core[x])return x;var path=require.modules.path();cwd=path.resolve("/",cwd);var y=cwd||"/";if(x.match(/^(?:\.\.?\/|\/)/)){var m=loadAsFileSync(path.resolve(y,x))||loadAsDirectorySync(path.resolve(y,x));if(m)return m}var n=loadNodeModulesSync(x,y);if(n)return n;throw new Error("Cannot find module '"+x+"'");function loadAsFileSync(x){x=path.normalize(x);if(require.modules[x]){return x}for(var i=0;i<require.extensions.length;i++){var ext=require.extensions[i];if(require.modules[x+ext])return x+ext}}function loadAsDirectorySync(x){x=x.replace(/\/+$/,"");var pkgfile=path.normalize(x+"/package.json");if(require.modules[pkgfile]){var pkg=require.modules[pkgfile]();var b=pkg.browserify;if(typeof b==="object"&&b.main){var m=loadAsFileSync(path.resolve(x,b.main));if(m)return m}else if(typeof b==="string"){var m=loadAsFileSync(path.resolve(x,b));if(m)return m}else if(pkg.main){var m=loadAsFileSync(path.resolve(x,pkg.main));if(m)return m}}return loadAsFileSync(x+"/index")}function loadNodeModulesSync(x,start){var dirs=nodeModulesPathsSync(start);for(var i=0;i<dirs.length;i++){var dir=dirs[i];var m=loadAsFileSync(dir+"/"+x);if(m)return m;var n=loadAsDirectorySync(dir+"/"+x);if(n)return n}var m=loadAsFileSync(x);if(m)return m}function nodeModulesPathsSync(start){var parts;if(start==="/")parts=[""];else parts=path.normalize(start).split("/");var dirs=[];for(var i=parts.length-1;i>=0;i--){if(parts[i]==="node_modules")continue;var dir=parts.slice(0,i+1).join("/")+"/node_modules";dirs.push(dir)}return dirs}}}();require.alias=function(from,to){var path=require.modules.path();var res=null;try{res=require.resolve(from+"/package.json","/")}catch(err){res=require.resolve(from,"/")}var basedir=path.dirname(res);var keys=(Object.keys||function(obj){var res=[];for(var key in obj)res.push(key);return res})(require.modules);for(var i=0;i<keys.length;i++){var key=keys[i];if(key.slice(0,basedir.length+1)===basedir+"/"){var f=key.slice(basedir.length);require.modules[to+f]=require.modules[basedir+f]}else if(key===basedir){require.modules[to]=require.modules[basedir]}}};(function(){var process={};var global=typeof window!=="undefined"?window:{};var definedProcess=false;require.define=function(filename,fn){if(!definedProcess&&require.modules.__browserify_process){process=require.modules.__browserify_process();definedProcess=true}var dirname=require._core[filename]?"":require.modules.path().dirname(filename);var require_=function(file){var requiredModule=require(file,dirname);var cached=require.cache[require.resolve(file,dirname)];if(cached&&cached.parent===null){cached.parent=module_}return requiredModule};require_.resolve=function(name){return require.resolve(name,dirname)};require_.modules=require.modules;require_.define=require.define;require_.cache=require.cache;var module_={id:filename,filename:filename,exports:{},loaded:false,parent:null};require.modules[filename]=function(){require.cache[filename]=module_;fn.call(module_.exports,require_,module_,module_.exports,dirname,filename,process,global);module_.loaded=true;return module_.exports}}})();require.define("path",function(require,module,exports,__dirname,__filename,process,global){function filter(xs,fn){var res=[];for(var i=0;i<xs.length;i++){if(fn(xs[i],i,xs))res.push(xs[i])}return res}function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length;i>=0;i--){var last=parts[i];if(last=="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}var splitPathRe=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;exports.resolve=function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"||!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."};exports.normalize=function(path){var isAbsolute=path.charAt(0)==="/",trailingSlash=path.slice(-1)==="/";path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){return p&&typeof p==="string"}).join("/"))};exports.dirname=function(path){var dir=splitPathRe.exec(path)[1]||"";var isWindows=false;if(!dir){return"."}else if(dir.length===1||isWindows&&dir.length<=3&&dir.charAt(1)===":"){return dir}else{return dir.substring(0,dir.length-1)}};exports.basename=function(path,ext){var f=splitPathRe.exec(path)[2]||"";if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)}return f};exports.extname=function(path){return splitPathRe.exec(path)[3]||""};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")}});require.define("__browserify_process",function(require,module,exports,__dirname,__filename,process,global){var process=module.exports={};process.nextTick=function(){var canSetImmediate=typeof window!=="undefined"&&window.setImmediate;var canPost=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(canSetImmediate){return function(f){return window.setImmediate(f)}}if(canPost){var queue=[];window.addEventListener("message",function(ev){if(ev.source===window&&ev.data==="browserify-tick"){ev.stopPropagation();if(queue.length>0){var fn=queue.shift();fn()}}},true);return function nextTick(fn){queue.push(fn);window.postMessage("browserify-tick","*")}}return function nextTick(fn){setTimeout(fn,0)}}();process.title="browser";process.browser=true;process.env={};process.argv=[];process.binding=function(name){if(name==="evals")return require("vm");else throw new Error("No such module. (Possibly not yet loaded)")};(function(){var cwd="/";var path;process.cwd=function(){return cwd};process.chdir=function(dir){if(!path)path=require("path");cwd=path.resolve(dir,cwd)}})()});require.define("/lib/solum/services/ajax.js",function(require,module,exports,__dirname,__filename,process,global){module.exports=function(){"use strict";var routes;var ajax={};ajax.routes={exampleRoute:{name:"exampleRoute",url:"/example/{param}",method:"GET",params:[{name:"param",defaultValue:"my default"}]}};ajax.defaultConfig={prefix:"",ajax:$.ajax,badRequestHandler:function(){},errorHandler:function(){},suffix:"",requestWrapper:null};ajax.manager=function(config){var self,prefix,ajaxMethod,badRequestHandler,errorHandler,suffix,requestWrapper;self=this;config=$.extend({},ajax.defaultConfig,config);prefix=config.prefix;ajaxMethod=config.ajax;badRequestHandler=config.badRequestHandler;errorHandler=config.errorHandler;suffix=config.suffix;requestWrapper=config.requestWrapper;this.status=ko.observable("OK");this.pendingRequests=[];this.isOK=ko.computed(function(){return this.status()==="OK"},this);this.isLoading=ko.computed(function(){return this.status()==="LOADING"},this);this.isFailed=ko.computed(function(){return this.status()==="FAILED"},this);this.isBadRequest=ko.computed(function(){return this.status()==="BAD_REQUEST"},this);this.generateURL=function(routeName,params,should_generate_query_string){var route,data,url,i,isDataUndefined,doesParamNotExist;if(typeof ajax.routes[routeName]!=="object"){throw"AjaxManager.generateURL(): The requested route does not exist: "+routeName}else{route=ajax.routes[routeName]}url=prefix+route.url+suffix;for(i in route.params){if(route.params.hasOwnProperty(i)){isDataUndefined=typeof params.routeData==="undefined";doesParamNotExist=typeof params.routeData[route.params[i].name]==="undefined";doesParamNotExist=doesParamNotExist&&typeof route.params[i].defaultValue==="undefined";if(isDataUndefined||doesParamNotExist){throw"AjaxManager.generateURL: A required parameter was not included in the request: "+route.params[i].name}else if(typeof params.routeData[route.params[i].name]!=="undefined"){url=url.replace("{"+route.params[i].name+"}",params.routeData[route.params[i].name])}else if(typeof route.params[i].defaultValue!=="undefined"){url=url.replace("{"+route.params[i].name+"}",route.params[i].defaultValue)}}}if(should_generate_query_string){if(requestWrapper){data={};data[requestWrapper]=params.data}else{data=params.data}url+="?"+jQuery.param(data)}return url};this.request=function(routeName,params,success,error_callbacks){if(typeof ajax.routes[routeName]!=="object"){throw"AjaxManager.request(): The requested route does not exist"}if(ajax.routes[routeName].method==="post"&&!params.data){throw"AjaxManager.request(): params.data must exist if you are posting."}return self.makeRequest(ajax.routes[routeName],params,success,error_callbacks)};this.makeRequest=function(route,params,success,error_callbacks){var cnt,url,data,request;self.status("LOADING");cnt=self.pendingRequests.length;if(cnt>0&&!params.isSimultaneousRequest){cnt=0;$.each(self.pendingRequests,function(idx,$ajaxInstance){if(typeof $ajaxInstance==="object"&&$ajaxInstance!==null&&!$ajaxInstance.isSimultaneousRequest){$ajaxInstance.abort()}})}url=self.generateURL(route.name,params);if(requestWrapper){data={};data[requestWrapper]=params.data}else{data=params.data}request=ajaxMethod({url:url,type:route.method,data:data,timeout:6e5,success:function(data,textStatus,jqXHR){var i,is_request_still_running=false;self.pendingRequests[cnt]=null;for(i in self.pendingRequests){if(self.pendingRequests[i]!==null){is_request_still_running=true}}if(!is_request_still_running){self.status("OK")}return success(data)},statusCode:{400:function(jqXHR,textStatus,errorThrown){var callback=badRequestHandler;self.status("BAD_REQUEST");self.pendingRequests[cnt]=null;if(typeof error_callbacks[400]==="function"){callback=error_callbacks[400]}return callback(jqXHR,textStatus,errorThrown)},403:function(jqXHR,textStatus,errorThrown){var callback=badRequestHandler;self.status("BAD_REQUEST");self.pendingRequests[cnt]=null;if(typeof error_callbacks[403]==="function"){callback=error_callbacks[403]}return callback(jqXHR,textStatus,errorThrown)},500:function(jqXHR,textStatus,errorThrown){var callback=errorHandler;self.status("FAILED");self.pendingRequests[cnt]=null;if(typeof error_callbacks[500]==="function"){callback=error_callbacks[500]}return callback(jqXHR,textStatus,errorThrown)}},error:function(jqXHR,textStatus,errorThrown){self.status("FAILED");self.pendingRequests[cnt]=null;return errorHandler(jqXHR,textStatus,errorThrown)}});request.route=route.name;request.isSimultaneousRequest=params.isSimultaneousRequest;self.pendingRequests[cnt]=request;return request}};routes=ajax.routes;ajax.addAjaxRoutes=function(newRoutes){$.extend(routes,newRoutes)};return ajax}()});require.define("/lib/solum/services/validation.js",function(require,module,exports,__dirname,__filename,process,global){module.exports=function(){"use strict";var validation={};validation.defaultConfig={};validation.validator=function(config){var self;self=this;config=$.extend(config,validation.defaultConfig);self.isEntityValid=function(entity){var is_valid,i,j,errors;is_valid=true;entity.errors.entity.removeAll();for(i in entity.properties){entity.errors.properties[i].removeAll();if(entity.properties[i].is_entity){is_valid=self.isEntityValid(entity.properties[i]);if(!is_valid){entity.errors.properties[i].push("errors.form.sub_entity.invalid")}}else{errors=self.isValid(entity.properties[i](),entity.constraints.properties[i]);for(j in errors){entity.errors.properties[i].push(errors[j])}if(errors.length>0){is_valid=false}}}if(is_valid){errors=self.isValid(entity,entity.constraints.entity_constraints);for(j in errors){entity.errors.entity.push(errors[j])}}return is_valid};self.isValid=function(subject,constraint_list){var errors,isFailed,i;errors=[];for(i in constraint_list){isFailed=false;if(constraint_list.hasOwnProperty(i)){try{if(constraint_list[i].params){constraint_list[i].params.validator=self}constraint_list[i].test(subject)}catch(e){errors.push(e.error);isFailed=true}if(isFailed&&!constraint_list[i].continueOnFail)break}}return errors}};validation.constraints={};validation.constraints.constructConstraint=function(group,name,params,msg){var constraints=validation.constraints;if(!constraints[group]||!constraints[group][name]){throw"ConstructConstraint: Constraint not found."}return new validation.constraints[group][name](params,msg)};validation.constraints.abstractConstraint=function(params,msg){this.msg=msg;this.params=params;this.continueOnFail=false;this.test=function(subject){throw{error:self.msg}}};validation.constraints.general=require("./constraints/general");validation.constraints.date=require("./constraints/date");validation.constraints.string=require("./constraints/string");validation.constraints.collection=require("./constraints/collection");return validation}()});require.define("/lib/solum/services/constraints/general.js",function(require,module,exports,__dirname,__filename,process,global){var _=require("underscore");module.exports=function(){"use strict";var general={};general.notNull=function(params,msg){var self=this;self.name="general.notNull";self.defaultMsg="errors.form.general.not_null";self.msg=msg?msg:self.defaultMsg;self.params=params;self.test=function(subject){if(subject===""||subject===null||subject===undefined){throw{error:self.msg}}return true}};general.type=function(params,msg){var self=this;self.name="general.type";self.defaultMsg="errors.form.general.type";msg=msg?msg:self.defaultMsg;self.msg=msg;self.params=params;self.test=function(subject){if(self.params.type==="null"&&subject!==null||typeof subject!==self.params.type){throw{error:self.msg}}return true}};general.choice=function(params,msg){var self=this;self.name="general.choice";self.defaultMsg="errors.form.general.type";msg=msg?msg:self.defaultMsg;self.msg=msg;self.params=params;self.test=function(subject){if(_.indexOf(self.params.choices,subject)===-1){throw{error:msg}}return true}};return general}()});require.define("/node_modules/underscore/package.json",function(require,module,exports,__dirname,__filename,process,global){module.exports={main:"underscore.js"}});require.define("/node_modules/underscore/underscore.js",function(require,module,exports,__dirname,__filename,process,global){(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.4.3";var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context)}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)===breaker)return}}else{for(var key in obj){if(_.has(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker)return}}}};_.map=_.collect=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)});return results};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}each(obj,function(value,index,list){if(!initial){memo=value;initial=true}else{memo=iterator.call(context,memo,value,index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}each(obj,function(value,index,list){index=keys?keys[--length]:--length;if(!initial){memo=obj[index];initial=true}else{memo=iterator.call(context,memo,obj[index],index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true}});return result};_.filter=_.select=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results[results.length]=value});return results};_.reject=function(obj,iterator,context){return _.filter(obj,function(value,index,list){return!iterator.call(context,value,index,list)},context)};_.every=_.all=function(obj,iterator,context){iterator||(iterator=_.identity);var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker});return!!result};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker});return!!result};_.contains=_.include=function(obj,target){if(obj==null)return false;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;return any(obj,function(value){return value===target})};_.invoke=function(obj,method){var args=slice.call(arguments,2);return _.map(obj,function(value){return(_.isFunction(method)?method:value[method]).apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})};_.where=function(obj,attrs){if(_.isEmpty(attrs))return[];return _.filter(obj,function(value){for(var key in attrs){if(attrs[key]!==value[key])return false}return true})};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.max.apply(Math,obj)}if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity,value:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed})});return result.value};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.min.apply(Math,obj)}if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity,value:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})});return result.value};_.shuffle=function(obj){var rand;var index=0;var shuffled=[];each(obj,function(value){rand=_.random(index++);shuffled[index-1]=shuffled[rand];shuffled[rand]=value});return shuffled};var lookupIterator=function(value){return _.isFunction(value)?value:function(obj){return obj[value]}};_.sortBy=function(obj,value,context){var iterator=lookupIterator(value);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index<right.index?-1:1}),"value")};var group=function(obj,value,context,behavior){var result={};var iterator=lookupIterator(value||_.identity);each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)});return result};_.groupBy=function(obj,value,context){return group(obj,value,context,function(result,key,value){(_.has(result,key)?result[key]:result[key]=[]).push(value)})};_.countBy=function(obj,value,context){return group(obj,value,context,function(result,key){if(!_.has(result,key))result[key]=0;result[key]++})};_.sortedIndex=function(array,obj,iterator,context){iterator=iterator==null?_.identity:lookupIterator(iterator);var value=iterator.call(context,obj);var low=0,high=array.length;while(low<high){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return obj.length===+obj.length?obj.length:_.keys(obj).length};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;return n!=null&&!guard?slice.call(array,0,n):array[0]};_.initial=function(array,n,guard){return slice.call(array,0,array.length-(n==null||guard?1:n))};_.last=function(array,n,guard){if(array==null)return void 0;if(n!=null&&!guard){return slice.call(array,Math.max(array.length-n,0))}else{return array[array.length-1]}};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){each(input,function(value){if(_.isArray(value)){shallow?push.apply(output,value):flatten(value,shallow,output)}else{output.push(value)}});return output};_.flatten=function(array,shallow){return flatten(array,shallow,[])};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iterator,context){if(_.isFunction(isSorted)){context=iterator;iterator=isSorted;isSorted=false}var initial=iterator?_.map(array,iterator,context):array;var results=[];var seen=[];each(initial,function(value,index){if(isSorted?!index||seen[seen.length-1]!==value:!_.contains(seen,value)){seen.push(value);results.push(array[index])}});return results};_.union=function(){return _.uniq(concat.apply(ArrayProto,arguments))};_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})};_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){var args=slice.call(arguments);var length=_.max(_.pluck(args,"length"));var results=new Array(length);for(var i=0;i<length;i++){results[i]=_.pluck(args,""+i)}return results};_.object=function(list,values){if(list==null)return{};var result={};for(var i=0,l=list.length;i<l;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i=0,l=array.length;if(isSorted){if(typeof isSorted=="number"){i=isSorted<0?Math.max(0,l+isSorted):isSorted}else{i=_.sortedIndex(array,item);return array[i]===item?i:-1}}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;i<l;i++)if(array[i]===item)return i;return-1};_.lastIndexOf=function(array,item,from){if(array==null)return-1;var hasIndex=from!=null;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf){return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item)}var i=hasIndex?from:array.length;while(i--)if(array[i]===item)return i;return-1};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0}step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start;start+=step}return range};var ctor=function(){};_.bind=function(func,context){var args,bound;if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;args=slice.call(arguments,2);return bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self}};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length==0)funcs=_.functions(obj);each(funcs,function(f){obj[f]=_.bind(obj[f],obj)});return obj};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))};_.throttle=function(func,wait){var context,args,timeout,result;var previous=0;var later=function(){previous=new Date;timeout=null;result=func.apply(context,args)};return function(){var now=new Date;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else if(!timeout){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var timeout,result;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)result=func.apply(context,args)};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)result=func.apply(context,args);return result}};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;memo=func.apply(this,arguments);func=null;return memo}};_.wrap=function(func,wrapper){return function(){var args=[func];push.apply(args,arguments);return wrapper.apply(this,args)}};_.compose=function(){var funcs=arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)]}return args[0]}};_.after=function(times,func){if(times<=0)return func();return function(){if(--times<1){return func.apply(this,arguments)}}};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)if(_.has(obj,key))keys[keys.length]=key;return keys};_.values=function(obj){var values=[];for(var key in obj)if(_.has(obj,key))values.push(obj[key]);return values};_.pairs=function(obj){var pairs=[];for(var key in obj)if(_.has(obj,key))pairs.push([key,obj[key]]);return pairs};_.invert=function(obj){var result={};for(var key in obj)if(_.has(obj,key))result[obj[key]]=key;return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){obj[prop]=source[prop]}}});return obj};_.pick=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));each(keys,function(key){if(key in obj)copy[key]=obj[key]});return copy};_.omit=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj){if(!_.contains(keys,key))copy[key]=obj[key]}return copy};_.defaults=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){if(obj[prop]==null)obj[prop]=source[prop]}}});return obj};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!=toString.call(b))return false;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return false;var length=aStack.length;while(length--){if(aStack[length]==a)return bStack[length]==b}aStack.push(a);bStack.push(b);var size=0,result=true;if(className=="[object Array]"){size=a.length;result=size==b.length;if(result){while(size--){if(!(result=eq(a[size],b[size],aStack,bStack)))break}}}else{var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)){return false}for(var key in a){if(_.has(a,key)){size++;if(!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break}}if(result){for(key in b){if(_.has(b,key)&&!size--)break}result=!size}}aStack.pop();bStack.pop();return result};_.isEqual=function(a,b){return eq(a,b,[],[])};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)=="[object Array]"};_.isObject=function(obj){return obj===Object(obj)};each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return!!(obj&&_.has(obj,"callee"))}}if(typeof/./!=="function"){_.isFunction=function(obj){return typeof obj==="function"}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return hasOwnProperty.call(obj,key)
};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.times=function(n,iterator,context){var accum=Array(n);for(var i=0;i<n;i++)accum[i]=iterator.call(context,i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+(0|Math.random()*(max-min+1))};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){if(string==null)return"";return(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}});_.result=function(object,property){if(object==null)return null;var value=object[property];return _.isFunction(value)?value.call(object):value};_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=""+ ++idCounter;return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]});if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}if(evaluate){source+="';\n"+evaluate+"\n__p+='"}index=offset+match.length;return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{var render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};template.source="function("+(settings.variable||"obj")+"){\n"+source+"}";return template};_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_);each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name=="shift"||name=="splice")&&obj.length===0)delete obj[0];return result.call(this,obj)}});each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}});_.extend(_.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this)});require.define("/lib/solum/services/constraints/date.js",function(require,module,exports,__dirname,__filename,process,global){var moment=require("moment");module.exports=function(){"use strict";var date={};date.isValid=function(params,msg){var self=this;self.continueOnFail=false;self.defaultMsg="errors.form.date.invalid";self.msg=msg?msg:self.defaultMsg;self.params=params;self.test=function(subject){if(!self.params.format_regex.test(subject)){throw{error:self.msg}}else if(!moment(subject,self.params.format).isValid()){throw{error:self.msg}}return true}};date.min=function(params,msg){var self=this;self.continueOnFail=false;self.defaultMsg="errors.form.date.min";self.msg=msg?msg:self.defaultMsg;self.params=params;self.test=function(subject){var subj_moment=moment(subject,self.params.format);if(subj_moment.diff(self.params.min,"days")<0){throw{error:self.msg,constraint:params.min}}return true}};date.max=function(params,msg){var self=this;self.continueOnFail=false;self.defaultMsg="errors.form.date.max";self.msg=msg?msg:self.defaultMsg;self.params=params;self.test=function(subject){var subj_moment=moment(subject,self.params.format);if(subj_moment.diff(self.params.max,"days")>0){throw{error:self.msg,constraint:params.max}}return true}};return date}()});require.define("/node_modules/moment/package.json",function(require,module,exports,__dirname,__filename,process,global){module.exports={main:"./moment.js"}});require.define("/node_modules/moment/moment.js",function(require,module,exports,__dirname,__filename,process,global){(function(undefined){var moment,VERSION="1.7.2",round=Math.round,i,languages={},currentLanguage="en",hasModule=typeof module!=="undefined"&&module.exports,langConfigProperties="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,parseMultipleFormatChunker=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{1,4}/,parseTokenWord=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/i,parseTokenT=/T/i,isoRegex=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoTimes=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,proxyGettersAndSetters="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),unitMillisecondFactors={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},formatFunctions={},ordinalizeTokens="DDD w M D d".split(" "),paddedTokens="M D H h m s w".split(" "),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return getValueFromArray("monthsShort",this.month(),this,format)},MMMM:function(format){return getValueFromArray("months",this.month(),this,format)},D:function(){return this.date()},DDD:function(){var a=new Date(this.year(),this.month(),this.date()),b=new Date(this.year(),0,1);return~~((a-b)/864e5+1.5)},d:function(){return this.day()},dd:function(format){return getValueFromArray("weekdaysMin",this.day(),this,format)},ddd:function(format){return getValueFromArray("weekdaysShort",this.day(),this,format)},dddd:function(format){return getValueFromArray("weekdays",this.day(),this,format)},w:function(){var a=new Date(this.year(),this.month(),this.date()-this.day()+5),b=new Date(a.getFullYear(),0,4);return~~((a-b)/864e5/7+1.5)},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return leftZeroFill(~~(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";if(a<0){a=-a;b="-"}return b+leftZeroFill(~~(a/60),2)+":"+leftZeroFill(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";if(a<0){a=-a;b="-"}return b+leftZeroFill(~~(10*a/6),4)}};function getValueFromArray(key,index,m,format){var lang=m.lang();return lang[key].call?lang[key](m,format):lang[key][index]}function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}function ordinalizeToken(func){return function(a){var b=func.call(this,a);return b+this.lang().ordinal(b)}}while(ordinalizeTokens.length){i=ordinalizeTokens.pop();formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i])}while(paddedTokens.length){i=paddedTokens.pop();formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2)}formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3);function Moment(date,isUTC,lang){this._d=date;this._isUTC=!!isUTC;this._a=date._a||null;this._lang=lang||false}function Duration(duration){var data=this._data={},years=duration.years||duration.y||0,months=duration.months||duration.M||0,weeks=duration.weeks||duration.w||0,days=duration.days||duration.d||0,hours=duration.hours||duration.h||0,minutes=duration.minutes||duration.m||0,seconds=duration.seconds||duration.s||0,milliseconds=duration.milliseconds||duration.ms||0;this._milliseconds=milliseconds+seconds*1e3+minutes*6e4+hours*36e5;this._days=days+weeks*7;this._months=months+years*12;data.milliseconds=milliseconds%1e3;seconds+=absRound(milliseconds/1e3);data.seconds=seconds%60;minutes+=absRound(seconds/60);data.minutes=minutes%60;hours+=absRound(minutes/60);data.hours=hours%24;days+=absRound(hours/24);days+=weeks*7;data.days=days%30;months+=absRound(days/30);data.months=months%12;years+=absRound(months/12);data.years=years;this._lang=false}function absRound(number){if(number<0){return Math.ceil(number)}else{return Math.floor(number)}}function leftZeroFill(number,targetLength){var output=number+"";while(output.length<targetLength){output="0"+output}return output}function addOrSubtractDurationFromMoment(mom,duration,isAdding){var ms=duration._milliseconds,d=duration._days,M=duration._months,currentDate;if(ms){mom._d.setTime(+mom+ms*isAdding)}if(d){mom.date(mom.date()+d*isAdding)}if(M){currentDate=mom.date();mom.date(1).month(mom.month()+M*isAdding).date(Math.min(currentDate,mom.daysInMonth()))}}function isArray(input){return Object.prototype.toString.call(input)==="[object Array]"}function compareArrays(array1,array2){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(~~array1[i]!==~~array2[i]){diffs++}}return diffs+lengthDiff}function dateFromArray(input,asUTC,hoursOffset,minutesOffset){var i,date,forValid=[];for(i=0;i<7;i++){forValid[i]=input[i]=input[i]==null?i===2?1:0:input[i]}input[7]=forValid[7]=asUTC;if(input[8]!=null){forValid[8]=input[8]}input[3]+=hoursOffset||0;input[4]+=minutesOffset||0;date=new Date(0);if(asUTC){date.setUTCFullYear(input[0],input[1],input[2]);date.setUTCHours(input[3],input[4],input[5],input[6])}else{date.setFullYear(input[0],input[1],input[2]);date.setHours(input[3],input[4],input[5],input[6])}date._a=forValid;return date}function loadLang(key,values){var i,m,parse=[];if(!values&&hasModule){values=require("./lang/"+key)}for(i=0;i<langConfigProperties.length;i++){values[langConfigProperties[i]]=values[langConfigProperties[i]]||languages.en[langConfigProperties[i]]}for(i=0;i<12;i++){m=moment([2e3,i]);parse[i]=new RegExp("^"+(values.months[i]||values.months(m,""))+"|^"+(values.monthsShort[i]||values.monthsShort(m,"")).replace(".",""),"i")}values.monthsParse=values.monthsParse||parse;languages[key]=values;return values}function getLangDefinition(m){var langKey=typeof m==="string"&&m||m&&m._lang||null;return langKey?languages[langKey]||loadLang(langKey):moment}function removeFormattingTokens(input){if(input.match(/\[.*\]/)){return input.replace(/^\[|\]$/g,"")}return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]]}else{array[i]=removeFormattingTokens(array[i])}}return function(mom){var output="";for(i=0;i<length;i++){output+=typeof array[i].call==="function"?array[i].call(mom,format):array[i]}return output}}function formatMoment(m,format){var i=5;function replaceLongDateFormatTokens(input){return m.lang().longDateFormat[input]||input}while(i--&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens)}if(!formatFunctions[format]){formatFunctions[format]=makeFormatFunction(format)}return formatFunctions[format](m)}function getParseRegexForToken(token){switch(token){case"DDDD":return parseTokenThreeDigits;case"YYYY":return parseTokenFourDigits;case"S":case"SS":case"SSS":case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return parseTokenWord;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return parseTokenOneOrTwoDigits;default:return new RegExp(token.replace("\\",""))}}function addTimeToArrayFromToken(token,input,datePartArray,config){var a,b;switch(token){case"M":case"MM":datePartArray[1]=input==null?0:~~input-1;break;case"MMM":case"MMMM":for(a=0;a<12;a++){if(getLangDefinition().monthsParse[a].test(input)){datePartArray[1]=a;b=true;break}}if(!b){datePartArray[8]=false}break;case"D":case"DD":case"DDD":case"DDDD":if(input!=null){datePartArray[2]=~~input}break;case"YY":datePartArray[0]=~~input+(~~input>70?1900:2e3);break;case"YYYY":datePartArray[0]=~~Math.abs(input);break;case"a":case"A":config.isPm=(input+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":datePartArray[3]=~~input;break;case"m":case"mm":datePartArray[4]=~~input;break;case"s":case"ss":datePartArray[5]=~~input;break;case"S":case"SS":case"SSS":datePartArray[6]=~~(("0."+input)*1e3);break;case"Z":case"ZZ":config.isUTC=true;a=(input+"").match(parseTimezoneChunker);if(a&&a[1]){config.tzh=~~a[1]}if(a&&a[2]){config.tzm=~~a[2]}if(a&&a[0]==="+"){config.tzh=-config.tzh;config.tzm=-config.tzm}break}if(input==null){datePartArray[8]=false}}function makeDateFromStringAndFormat(string,format){var datePartArray=[0,0,1,0,0,0,0],config={tzh:0,tzm:0},tokens=format.match(formattingTokens),i,parsedInput;for(i=0;i<tokens.length;i++){parsedInput=(getParseRegexForToken(tokens[i]).exec(string)||[])[0];if(parsedInput){string=string.slice(string.indexOf(parsedInput)+parsedInput.length)}if(formatTokenFunctions[tokens[i]]){addTimeToArrayFromToken(tokens[i],parsedInput,datePartArray,config)}}if(config.isPm&&datePartArray[3]<12){datePartArray[3]+=12}if(config.isPm===false&&datePartArray[3]===12){datePartArray[3]=0}return dateFromArray(datePartArray,config.isUTC,config.tzh,config.tzm)}function makeDateFromStringAndArray(string,formats){var output,inputParts=string.match(parseMultipleFormatChunker)||[],formattedInputParts,scoreToBeat=99,i,currentDate,currentScore;for(i=0;i<formats.length;i++){currentDate=makeDateFromStringAndFormat(string,formats[i]);formattedInputParts=formatMoment(new Moment(currentDate),formats[i]).match(parseMultipleFormatChunker)||[];currentScore=compareArrays(inputParts,formattedInputParts);if(currentScore<scoreToBeat){scoreToBeat=currentScore;output=currentDate}}return output}function makeDateFromString(string){var format="YYYY-MM-DDT",i;if(isoRegex.exec(string)){for(i=0;i<4;i++){if(isoTimes[i][1].exec(string)){format+=isoTimes[i][0];break}}return parseTokenTimezone.exec(string)?makeDateFromStringAndFormat(string,format+" Z"):makeDateFromStringAndFormat(string,format)}return new Date(string)}function substituteTimeAgo(string,number,withoutSuffix,isFuture,lang){var rt=lang.relativeTime[string];return typeof rt==="function"?rt(number||1,!!withoutSuffix,string,isFuture):rt.replace(/%d/i,number||1)}function relativeTime(milliseconds,withoutSuffix,lang){var seconds=round(Math.abs(milliseconds)/1e3),minutes=round(seconds/60),hours=round(minutes/60),days=round(hours/24),years=round(days/365),args=seconds<45&&["s",seconds]||minutes===1&&["m"]||minutes<45&&["mm",minutes]||hours===1&&["h"]||hours<22&&["hh",hours]||days===1&&["d"]||days<=25&&["dd",days]||days<=45&&["M"]||days<345&&["MM",round(days/30)]||years===1&&["y"]||["yy",years];args[2]=withoutSuffix;args[3]=milliseconds>0;args[4]=lang;return substituteTimeAgo.apply({},args)}moment=function(input,format){if(input===null||input===""){return null}var date,matched;if(moment.isMoment(input)){return new Moment(new Date(+input._d),input._isUTC,input._lang)}else if(format){if(isArray(format)){date=makeDateFromStringAndArray(input,format)}else{date=makeDateFromStringAndFormat(input,format)}}else{matched=aspNetJsonRegex.exec(input);date=input===undefined?new Date:matched?new Date(+matched[1]):input instanceof Date?input:isArray(input)?dateFromArray(input):typeof input==="string"?makeDateFromString(input):new Date(input)}return new Moment(date)};moment.utc=function(input,format){if(isArray(input)){return new Moment(dateFromArray(input,true),true)}if(typeof input==="string"&&!parseTokenTimezone.exec(input)){input+=" +0000";if(format){format+=" Z"}}return moment(input,format).utc()};moment.unix=function(input){return moment(input*1e3)};moment.duration=function(input,key){var isDuration=moment.isDuration(input),isNumber=typeof input==="number",duration=isDuration?input._data:isNumber?{}:input,ret;if(isNumber){if(key){duration[key]=input}else{duration.milliseconds=input}}ret=new Duration(duration);if(isDuration){ret._lang=input._lang}return ret};moment.humanizeDuration=function(num,type,withSuffix){return moment.duration(num,type===true?null:type).humanize(type===true?true:withSuffix)};moment.version=VERSION;moment.defaultFormat=isoFormat;moment.lang=function(key,values){var i;if(!key){return currentLanguage}if(values||!languages[key]){loadLang(key,values)}if(languages[key]){for(i=0;i<langConfigProperties.length;i++){moment[langConfigProperties[i]]=languages[key][langConfigProperties[i]]}moment.monthsParse=languages[key].monthsParse;currentLanguage=key}};moment.langData=getLangDefinition;moment.isMoment=function(obj){return obj instanceof Moment};moment.isDuration=function(obj){return obj instanceof Duration};moment.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(hours,minutes,isLower){if(hours>11){return isLower?"pm":"PM"}else{return isLower?"am":"AM"}},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(number){var b=number%10;return~~(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th"}});moment.fn=Moment.prototype={clone:function(){return moment(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds(),!!this._isUTC]},isValid:function(){if(this._a){if(this._a[8]!=null){return!!this._a[8]}return!compareArrays(this._a,(this._a[7]?moment.utc(this._a):moment(this._a)).toArray())}return!isNaN(this._d.getTime())},utc:function(){this._isUTC=true;return this},local:function(){this._isUTC=false;return this},format:function(inputString){return formatMoment(this,inputString?inputString:moment.defaultFormat)},add:function(input,val){var dur=val?moment.duration(+val,input):moment.duration(input);addOrSubtractDurationFromMoment(this,dur,1);return this},subtract:function(input,val){var dur=val?moment.duration(+val,input):moment.duration(input);addOrSubtractDurationFromMoment(this,dur,-1);return this},diff:function(input,val,asFloat){var inputMoment=this._isUTC?moment(input).utc():moment(input).local(),zoneDiff=(this.zone()-inputMoment.zone())*6e4,diff=this._d-inputMoment._d-zoneDiff,year=this.year()-inputMoment.year(),month=this.month()-inputMoment.month(),date=this.date()-inputMoment.date(),output;if(val==="months"){output=year*12+month+date/30}else if(val==="years"){output=year+(month+date/30)/12}else{output=val==="seconds"?diff/1e3:val==="minutes"?diff/6e4:val==="hours"?diff/36e5:val==="days"?diff/864e5:val==="weeks"?diff/6048e5:diff}return asFloat?output:round(output)},from:function(time,withoutSuffix){return moment.duration(this.diff(time)).lang(this._lang).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(){var diff=this.diff(moment().sod(),"days",true),calendar=this.lang().calendar,allElse=calendar.sameElse,format=diff<-6?allElse:diff<-1?calendar.lastWeek:diff<0?calendar.lastDay:diff<1?calendar.sameDay:diff<2?calendar.nextDay:diff<7?calendar.nextWeek:allElse;return this.format(typeof format==="function"?format.apply(this):format)},isLeapYear:function(){var year=this.year();return year%4===0&&year%100!==0||year%400===0},isDST:function(){return this.zone()<moment([this.year()]).zone()||this.zone()<moment([this.year(),5]).zone()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return input==null?day:this.add({d:input-day})},startOf:function(val){switch(val.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(val){return this.startOf(val).add(val.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return moment.utc([this.year(),this.month()+1,0]).date()},lang:function(lang){if(lang===undefined){return getLangDefinition(this)}else{this._lang=lang;return this}}};function makeGetterAndSetter(name,key){moment.fn[name]=function(input){var utc=this._isUTC?"UTC":"";if(input!=null){this._d["set"+utc+key](input);return this}else{return this._d["get"+utc+key]()}}}for(i=0;i<proxyGettersAndSetters.length;i++){makeGetterAndSetter(proxyGettersAndSetters[i].toLowerCase(),proxyGettersAndSetters[i])}makeGetterAndSetter("year","FullYear");moment.duration.fn=Duration.prototype={weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(withSuffix){var difference=+this,rel=this.lang().relativeTime,output=relativeTime(difference,!withSuffix,this.lang()),fromNow=difference<=0?rel.past:rel.future;if(withSuffix){if(typeof fromNow==="function"){output=fromNow(output)}else{output=fromNow.replace(/%s/i,output)}}return output},lang:moment.fn.lang};function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}function makeDurationAsGetter(name,factor){moment.duration.fn["as"+name]=function(){return+this/factor}}for(i in unitMillisecondFactors){if(unitMillisecondFactors.hasOwnProperty(i)){makeDurationAsGetter(i,unitMillisecondFactors[i]);makeDurationGetter(i.toLowerCase())}}makeDurationAsGetter("Weeks",6048e5);if(hasModule){module.exports=moment}if(typeof ender==="undefined"){this["moment"]=moment}if(typeof define==="function"&&define.amd){define("moment",[],function(){return moment})}}).call(this)});require.define("/lib/solum/services/constraints/string.js",function(require,module,exports,__dirname,__filename,process,global){module.exports=function(){"use strict";var string={};string.minLength=function(params,msg){var self=this;self.defaultMsg="errors.form.string.min_length";self.msg=msg?msg:self.defaultMsg;self.params=params;self.test=function(subject){if(subject.length<self.params.min){throw{error:self.msg}}return true}};string.maxLength=function(params,msg){var self=this;self.defaultMsg="errors.form.string.max_length";self.msg=msg?msg:self.defaultMsg;self.params=params;this.test=function(subject){if(subject.length>self.params.max){throw{error:self.msg}}return true}};string.match=function(params,msg){var self=this;self.defaultMsg="errors.form.string.match";self.msg=msg?msg:self.defaultMsg;self.params=params;this.test=function(subject){if(subject.match(self.params.regex)){throw{error:self.msg}}return true}};return string}()});require.define("/lib/solum/services/constraints/collection.js",function(require,module,exports,__dirname,__filename,process,global){var _=require("underscore");module.exports=function(){"use strict";var collection={};collection.validate=function(params,msg){var self=this;self.name="collection.validate";self.defaultMsg="errors.form.collection.validate";msg=msg?msg:self.defaultMsg;self.msg=msg;self.params=params;self.test=function(entities){var i;for(i in entities){if(!params.validator.isEntityValid(entities[i])){throw{error:self.msg}}}return true}};collection.unique=function(params,msg){var self=this;self.name="collection.unique";self.defaultMsg="errors.form.collection.unique";msg=msg?msg:self.defaultMsg;self.msg=msg;self.params=params;self.test=function(entities){var values,unique_values,property=self.params.property;values=_.map(entities,function(value,key,list){return value[property]()});unique_values=_.uniq(values);if(values.length!==unique_values.length){throw{error:self.msg}}return true}};return collection}()});require.define("/lib/solum/services/translation.js",function(require,module,exports,__dirname,__filename,process,global){module.exports=function(root){"use strict";var translation={};translation.dictionary={en:{}};translation.addDictionary=function(dict){translation.dictionary=$.extend(true,{},dict,translation.dictionary)};translation.defaultConfig={};translation.translator=function(config){var self,locale,dictionary,translations,localized_format;config=$.extend({},config,translation.defaultConfig);self=this;locale="en";dictionary=translation.dictionary;translations=dictionary[locale];self.translate=function(text,replace){var key,keys,trans,i,j,r,v;keys=text.split(".");trans=translations;for(j in keys){if(keys.hasOwnProperty(j)){if(typeof trans[keys[j]]==="string"||typeof trans[keys[j]]==="object"){trans=trans[keys[j]]}else{trans=text}}}for(i in replace){if(replace.hasOwnProperty(i)){key="%"+i+"%";if(!replace[i].mustTranslate){trans=trans.replace(key,replace[i])}else{r=replace[i];v=r.value;if(r.type==="date"){v=self.dateToLocalizedString(v)}else if(r.type==="number"){v=self.numberToLocalizedNumberString(v)}else if(r.type==="currency"){v=self.numberToLocalizedCurrencyString(v)}else{v=self.translate(v)}trans=trans.replace(key,v)}}}return trans};self.dateToLocalizedString=function(dateObj){if(!(dateObj instanceof Date)){throw"Translator.dateToLocalizedString: tried to translate a non-date object."}return dateObj.toString(localized_format.date.format)};self.numberToLocalizedNumberString=function(num){};self.numberToLocalizedCurrencyString=function(num){}};return translation}()});require.define("/lib/solum/services/storage.js",function(require,module,exports,__dirname,__filename,process,global){module.exports=function(){"use strict";var storage={};storage.HTML5={};storage.HTML5.defaultConfig={ttl:7*24*60*60*1e3,namespace:"",storage:localStorage};storage.HTML5.manager=function(config){var MetaDataWrapper,storageApi,ttl,namespace,storage,isStorageAvailable,maxedOut,isMaxedOut,apiAccessor;config=$.extend(config,storage.HTML5.defaultConfig);MetaDataWrapper=function(value,ttl){var now=new Date;this.created=now.getTime();this.ttl=ttl;this.value=value};storageApi={};ttl=config.ttl;namespace=config.namespace;storage=config.storage;isStorageAvailable=typeof localStorage==="object"&&localStorage!==null;isStorageAvailable=isStorageAvailable&&typeof sessionStorage==="object"&&sessionStorage!==null;maxedOut=false;isMaxedOut=function(){return isMaxedOut};storageApi.save=function(key,value){if(maxedOut){return false}var w=new MetaDataWrapper(value,ttl);storage[key]=JSON.stringify(w);try{w=new MetaDataWrapper(value,ttl);storage[key]=JSON.stringify(w)}catch(e){if(e!=="QUOTA_EXCEEDED_ERR"){throw e}maxedOut=true;return false}return true};storageApi.get=function(key){var badValues,type,o,created,ttl,d;badValues={"null":true,undefined:true,"false":true};type=typeof storage[key];if(type==="undefined"||badValues[type]){return null}o=JSON.parse(storage[key]);created=Number(o.created);ttl=Number(o.ttl);if(typeof o!=="object"||created===0||isNaN(created)||isNaN(ttl)){return null}d=new Date;if(d.getTime()-created>ttl){storageApi.remove(key);return null}return o.value};storageApi.remove=function(key){storage.removeItem(key);maxedOut=false};storageApi.clear=function(){storage.clear();maxedOut=false};apiAccessor=function(method,key,value){if(typeof method!=="string"||typeof storageApi[method]!=="function"){throw"StorageManager: Method was not a string or does not exist, got type: "+typeof method}if(!isStorageAvailable){return false}var nskey=namespace+key;return storageApi[method](nskey,value)};apiAccessor.isMaxedOut=isMaxedOut;return apiAccessor};return storage}()});require.define("/lib/solum/components/tables.js",function(require,module,exports,__dirname,__filename,process,global){module.exports=function(){"use strict";var api={};api.paginatedTable=function(){if(!(this instanceof api.paginatedTable)){return new api.paginatedTable}var self,tableApi;self=this;tableApi={};tableApi.list=ko.observableArray([]);tableApi.page=new api.page;tableApi.view={};tableApi.view.afterRender=function(){};tableApi.view.afterAdd=function(){};tableApi.view.beforeRemove=function(){};tableApi.addItem=function(item){self.list.push(item)};tableApi.addItems=function(items){var i;if(typeof items!=="object"||items===null){throw"Add items helper requires an array. Received: "+typeof items}for(i in items){if(items.hasOwnProperty(i)){self.addItem(items[i])}}return items};tableApi.removeItems=function(key,value){var list,temp,i;list=self.list();temp=[];for(i in list){if(list.hasOwnProperty(i)&&(typeof list[i][key]==="undefined"||list[i][key]!==value)){temp.push(list[i])}}self.empty();self.addItems(temp)};tableApi.empty=function(){self.list.splice(0,self.list().length)};tableApi.reload=function(items){self.empty();self.addItems(items)};this.list=tableApi.list;this.view=tableApi.view;this.page=tableApi.page;this.addItem=tableApi.addItem;this.addItems=tableApi.addItems;this.removeItems=tableApi.removeItems;this.empty=tableApi.empty;this.reload=tableApi.reload};api.groupedList=function(){var self,groupedListApi,empty;if(!(this instanceof api.groupedList)){return new api.groupedList}self=this;groupedListApi={};groupedListApi.groupedList=ko.observableArray([]);groupedListApi.table=new api.paginatedTable;groupedListApi.view={};groupedListApi.view.afterRender=function(){};groupedListApi.view.afterAdd=function(){};groupedListApi.view.beforeRemove=function(){};groupedListApi.groupBy=ko.observable(null);groupedListApi.setGroupBy=function(p){self.groupBy(p);self.groupItems()};empty=function(){self.groupedList.splice(0,self.groupedList().length)};groupedListApi.groupItems=function(){var p,list,temp,i,t;p=self.groupBy();empty();list=self.table.list();if(!p){self.groupedList.push({property:null,entries:list.slice(0)});return}temp={};for(i in list){if(list.hasOwnProperty(i)){if(typeof list[i][p]==="undefined"){throw"GroupedList.groupItems: group by property does not exist on one or more elements."}else{if(typeof temp[list[i][p]]!=="object"){temp[list[i][p]]=[]}temp[list[i][p]].push(list[i])
}}}t=null;for(i in temp){if(temp.hasOwnProperty(i)){t={property:i,entries:temp[i]};self.groupedList.push(t)}}};this.groupedList=groupedListApi.groupedList;this.table=groupedListApi.table;this.view=groupedListApi.view;this.groupBy=groupedListApi.groupBy;this.setGroupBy=groupedListApi.setGroupBy;this.groupItems=groupedListApi.groupItems};api.page=function(){var self,setSort;if(!(this instanceof api.page)){return new api.page}self=this;self.onChange=function(){return self};self.page=ko.observable(1);self.getPage=function(){return self.page()};self.setPage=function(num){var retVal=false;if(typeof num!=="number"){throw"Page: setPage only accepts a number"}if(num>=1&&num<=self.getTotalPages()&&num!==self.page()){self.page(num);retVal=self.onChange()}return retVal};self.first=function(){return self.setPage(1)};self.next=function(){return self.setPage(self.page()+1)};self.previous=function(){return self.setPage(self.page()-1)};self.last=function(){return self.setPage(self.totalPages())};self.setPageToFirstAndTriggerOnChange=function(){var ret;if(self.getPage()!==1){ret=self.first()}else{ret=self.onChange()}return ret};self.totalPages=ko.observable(0);self.getTotalPages=function(){return self.totalPages()};self.totalCount=ko.observable(0);self.getTotalCount=function(){return self.totalCount()};self.setTotalCount=function(num){if(typeof num!=="number"){throw"Total count must be a number"}self.totalCount(num);self.totalPages(Math.ceil(self.totalCount()/self.pageSize()));return self};self.defaultPageSize=25;self.pageSize=ko.observable(self.defaultPageSize);self.getPageSize=function(){return self.pageSize()};self.setPageSize=function(num){var retVal=false;if(typeof num!=="number"){throw"Page size must be a number"}if(num!=self.getPageSize()){self.pageSize(num);self.totalPages(Math.ceil(self.totalCount()/self.pageSize()));self.setPageToFirstAndTriggerOnChange();retVal=true}return retVal};self.loadMore=function(){var ret;if(self.pageSize()>=self.totalCount()){ret=false}else{ret=self.setPageSize(self.pageSize()+self.defaultPageSize)}return ret};self.hasMore=ko.computed(function(){return self.pageSize()<self.totalCount()});self.isFirstPage=ko.computed(function(){return self.page()===1});self.isNotFirstPage=ko.computed(function(){return self.page()!==1});self.isLastPage=ko.computed(function(){return self.page()===self.totalPages()});self.isNotLastPage=ko.computed(function(){return self.page()<self.totalPages()});self.sortCol=ko.observable(0);self.getSortCol=function(){return self.sortCol()};self.setSortCol=function(num){if(typeof num!=="number"){throw"Sort column must be a number"}self.sortCol(num);self.setPageToFirstAndTriggerOnChange()};self.sortDir=ko.observable("A");self.getSortDir=function(){return self.sortDir()};self.setSortDir=function(dir){if(dir!=="A"&&dir!=="D"){throw"Sort direction must be 'A' or 'D'"}self.sortDir(dir);self.setPageToFirstAndTriggerOnChange()};setSort=function(col,dir){self.sortCol(col);self.sortDir(dir);self.setPageToFirstAndTriggerOnChange()};self.toggleSort=function(colIdx){var sort,dir,ret;sort=null;dir="A";if(colIdx!==self.getSortCol()){dir="A";ret=setSort(colIdx,dir)}else{dir=self.getSortDir()==="A"?"D":"A";ret=setSort(colIdx,dir)}return ret};self.toObj=function(){return{page:self.page(),limit:self.pageSize(),sort_col:self.getSortCol(),sort_dir:self.getSortDir()}};self.fromObj=function(obj){if(typeof obj!=="object"||obj===null){throw"Page: fromObj() accepts only an object with the appropriate properties"}self.setTotalCount(obj.total_rows);self.page(obj.page);return self}};api.tree=function(){if(!(this instanceof api.tree)){return new api.tree}var self=this;self.raw=new api.paginatedTable;self.hierarchy=new ko.observable({});self.reset=function(){self.hierarchy({})};self.addItems=function(items){self.raw.addItems(items);self.createHierarchyFromRawList()};self.createHierarchyFromRawList=function(delim){var list,hierarchy,i,filepath,current,j,a,s,lastIdx;delim=typeof delim==="undefined"?"/":delim;list=self.raw.list();hierarchy={};for(i in list){filepath=list[i].split(delim);current=hierarchy;lastIdx=filepath.length-1;for(j in filepath){s=filepath[j];if(j==lastIdx){current[s]=list[i]}else if(typeof current[s]!=="object"&&s!==""){current[s]={};current=current[s]}else if(s!==""){current=current[s]}}}self.hierarchy(hierarchy)};return self};return api}()});require.define("/lib/solum/components/dates.js",function(require,module,exports,__dirname,__filename,process,global){module.exports=function(){var api={};api.SmartDate=function(){var self=this;self.slug=ko.observable();self.name=null;self.dates={start:ko.observable(),end:ko.observable()};self.fromJSON=function(data){self.slug(data.slug);self.name=data.name;self.dates.start(data.dates.start);self.dates.end(data.dates.end)}};api.smartDateMenu={};api.DateRange=function(root){var self,ignoreDateSubscription;self=this;self.selectedSmartDate=ko.observable();self.selectedSmartDateSlug=ko.observable();self.validator=root.getService("validation","validator");self.hasChanged=false;self.dates=new root.constructEntity("DateRange");self.smartDates=ko.observableArray([]);self.addSmartDates=function(smart_dates){var i,sd;for(i in smart_dates){if(smart_dates.hasOwnProperty(i)){sd=new api.SmartDate;sd.fromJSON(smart_dates[i]);self.smartDates.push(sd)}}};self.selectedSmartDateSlug.subscribe(function(selectedSlug){var s,found,i,start,end;s=self.smartDates();found=false;for(i in s){if(s.hasOwnProperty(i)&&s[i].slug()===selectedSlug){self.selectedSmartDate(s[i]);found=true}}if(found){start=self.selectedSmartDate().dates.start();end=self.selectedSmartDate().dates.end();ignoreDateSubscription=true;self.dates.start(start);self.dates.end(end);ignoreDateSubscription=false}});ignoreDateSubscription=false;self.updateToCustom=function(){var start,end;start=self.dates.start();end=self.dates.end();self.hasChanged=true;self.validator.isEntityValid(self.dates);if(self.selectedSmartDateSlug()!=="custom"&&!ignoreDateSubscription){self.selectedSmartDateSlug("custom");self.dates.start(start);self.dates.end(end)}};self.dates.start.subscribe(self.updateToCustom);self.dates.end.subscribe(self.updateToCustom);self.isCustomSelected=ko.computed(function(){return self.selectedSmartDateSlug()==="custom"},this)};return api}()});require.define("/lib/solum/entities/DateRange.js",function(require,module,exports,__dirname,__filename,process,global){var moment=require("moment");module.exports=function(solum){var self=this,format="YYYY-MM-DD",format_regex=/^[0-9]{4}-[0-1]{1}[0-9]{1}-[0-3]{1}[0-9]{1}$/;this.properties={};this.properties.start=ko.observable("");this.properties.end=ko.observable("");var max_range_constraint={};max_range_constraint.name="Date Range - Range greater than x duration";max_range_constraint.params={max:3,unit:"years"};max_range_constraint.msg="errors.form.date.max_range";max_range_constraint.test=function(){if(self.errors.properties.start().length>0||self.errors.properties.end().length>0){return}var start_moment=moment(self.properties.start(),format);var end_moment=moment(self.properties.end(),format);if(start_moment.diff(end_moment,this.params.unit)>this.params.max){throw{error:this.msg,constraint:this.params.max}}};var min_range_constraint={};min_range_constraint.name="Date Range - start before end";min_range_constraint.params={min:0,unit:"days"};min_range_constraint.msg="errors.form.date.min_range";min_range_constraint.test=function(){if(self.errors.properties.start().length>0||self.errors.properties.end().length>0){return}var start_moment=moment(self.properties.start(),format);var end_moment=moment(self.properties.end(),format);if(start_moment.diff(end_moment,this.params.unit)>this.params.min){throw{error:this.msg,constraint:this.params.max}}};var min_params={format:format,format_regex:format_regex,min:moment().subtract("years",3).startOf("year")};var max_params={format:format,format_regex:format_regex,max:moment().startOf("day")};this.constraints={};this.constraints.entity=[];this.constraints.properties={start:[solum.constructConstraint("general","notNull",{},"errors.form.date.not_null"),solum.constructConstraint("date","isValid",{format:format,format_regex:format_regex}),solum.constructConstraint("date","min",min_params),solum.constructConstraint("date","max",max_params),min_range_constraint,max_range_constraint],end:[solum.constructConstraint("general","notNull",{},"errors.form.date.not_null"),solum.constructConstraint("date","isValid",{format:format,format_regex:format_regex}),solum.constructConstraint("date","min",min_params),solum.constructConstraint("date","max",max_params),min_range_constraint,max_range_constraint]}}});require.define("/lib/solum.js",function(require,module,exports,__dirname,__filename,process,global){solum=function(){"use strict";var api,decorateEntity,getSingleton;api=function(){};api.extend=function(subclass,superclass){var F=function(){};F.prototype=superclass.prototype;subclass.prototype=new F;subclass.prototype.constructor=subclass;subclass.superclass=superclass.prototype};api.config={locale:"en",dateAndNumberFormatLocalization:{en:{date:{long_format:"MMMM d, yyyy",format:"yyyy-M-dd",pattern:/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/,delimiter:"-",map:{year:2,month:1,day:0}},number:{thousand_delimiter:",",decimal:"."},currency:{currency_symbol:"&#36;",thousand_delimiter:",",decimal:"."}}}};api.setLocale=function(loc){api.config.locale=loc};api.models={};api.getModel=function(group,model){if(typeof api.models[group]!=="object"||typeof api.models[group][model]!=="function"){throw"The requested model does not exist."}return new api.models[group][model]};api.components={};api.getComponent=function(group,component){if(typeof api.components[group]!=="object"||typeof api.components[group][component]!=="function"){throw"The requested component does not exist."}return new api.components[group][component](api)};api.entities={};decorateEntity=function(entity){var i;entity.is_entity=true;entity.errors={};entity.errors.entity=ko.observableArray([]);entity.errors.properties={};for(i in entity.properties){entity.errors.properties[i]=ko.observableArray([]);entity[i]=entity.properties[i]}entity.hasError=ko.computed(function(){var i,has_property_error=false;for(i in this.errors.properties){if(this.errors.properties[i]().length>0){has_property_error=true}}return has_property_error||this.errors.entity().length>0},entity);if(typeof entity.toObject!=="function"){entity.toObject=function(){var i,j,collection,obj={};var self=this;for(i in self.properties){if(self.properties[i].is_entity){obj[i]=self.properties[i].toObject()}else if(self.properties[i].is_entity_collection){collection=self.properties[i]();obj[i]=[];for(j in collection){obj[i].push(collection[j].toObject())}}else{obj[i]=self.properties[i]()}}return obj}}if(typeof entity.fromObject!=="function"){entity.fromObject=function(obj){var i,j,collection,ent,self=this;for(i in self.properties){if(self.properties[i].is_entity){self.properties[i].fromObject(obj[i])}else if(self.properties[i].is_entity_collection){collection=obj[i];self.properties[i].removeAll();for(j in collection){ent=api.constructEntity(self.properties[i].entity_type);ent.fromObject(collection[j]);self.properties[i].push(ent)}}else{self.properties[i](obj[i])}}return obj}}if(typeof entity.reset!=="function"){entity.reset=function(){var i,self=this;for(i in self.properties){if(self.properties[i].is_entity){self.properties[i].reset()}else if(self.properties[i].is_entity_collection){self.properties[i].removeAll()}else{self.properties[i](undefined)}}return self}}};api.constructEntity=function(name,raw_obj){if(typeof name!=="string"){throw"The entity name must be a string"}var entity=new api.entities[name](api);decorateEntity(entity);if(raw_obj){entity.fromObject(raw_obj)}return entity};api.instances={};getSingleton=function(group,name,config,isReset){var isRightType,doesGroupExist,doesSvcExist;isRightType=typeof group==="string"&&typeof name==="string";doesGroupExist=typeof api.services[group]==="object";doesSvcExist=doesGroupExist&&typeof api.services[group][name]==="function";if(!isRightType||!doesSvcExist){throw"The requested service does not exist. Group: "+group+" , name: "+name}if(typeof api.instances[group]!=="object"){api.instances[group]={};api.instances[group][name]=null}if(api.instances[group][name]===null||isReset){api.instances[group][name]=new api.services[group][name](config)}return api.instances[group][name]};api.getService=function(group,name,config){return getSingleton(group,name,config,false)};api.configureService=function(group,name,config){return getSingleton(group,name,config,true)};api.services={};return api}();solum.services.ajax=require("./solum/services/ajax");solum.addAjaxRoutes=solum.services.ajax.addAjaxRoutes;solum.services.validation=require("./solum/services/validation");solum.constructConstraint=solum.services.validation.constraints.constructConstraint;solum.services.translation=require("./solum/services/translation");solum.addDictionary=solum.services.translation.addDictionary;solum.services.storage=require("./solum/services/storage");solum.components.tables=require("./solum/components/tables");solum.components.dates=require("./solum/components/dates");solum.entities.DateRange=require("./solum/entities/DateRange");module.exports=solum;this.solum=solum});require("/lib/solum.js")})();