(function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports)}return t[n].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i})({1:[function(require,module,exports){(function(){solum=function(){"use strict";var api,decorateEntity,getSingleton;api=function(){};api.extend=function(subclass,superclass){var F=function(){};F.prototype=superclass.prototype;subclass.prototype=new F;subclass.prototype.constructor=subclass;subclass.superclass=superclass.prototype};api.config={locale:"en",dateAndNumberFormatLocalization:{en:{date:{long_format:"MMMM d, yyyy",format:"yyyy-M-dd",pattern:/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/,delimiter:"-",map:{year:2,month:1,day:0}},number:{thousand_delimiter:",",decimal:"."},currency:{currency_symbol:"&#36;",thousand_delimiter:",",decimal:"."}}}};api.setLocale=function(loc){api.config.locale=loc};api.models={};api.getModel=function(group,model){if(typeof api.models[group]!=="object"||typeof api.models[group][model]!=="function"){throw"The requested model does not exist."}return new api.models[group][model]};api.components={};api.getComponent=function(group,component){if(typeof api.components[group]!=="object"||typeof api.components[group][component]!=="function"){throw"The requested component does not exist."}return new api.components[group][component](api)};api.entities={};var hasErrorFunctionGenerator=function(key,entity){return ko.computed(function(){return entity.errors.properties[key]().length>0})};var getFirstErrorFunctionGenerator=function(key,entity){return ko.computed(function(){var error="";if(entity.errors.properties[key]().length>0){error=entity.errors.properties[key]()[0]}return error})};decorateEntity=function(entity){var i;entity.is_entity=true;entity.errors={};entity.errors.entity=ko.observableArray([]);entity.errors.properties={};for(i in entity.properties){entity.errors.properties[i]=ko.observableArray([]);if(typeof entity[i]!=="function"){entity[i]=entity.properties[i]}entity[i].hasError=hasErrorFunctionGenerator(i,entity);entity[i].getError=getFirstErrorFunctionGenerator(i,entity);entity.properties[i].__parent=entity;entity.properties[i].__name=i}entity.hasError=ko.computed(function(){var i,has_property_error=false;for(i in this.errors.properties){if(this.errors.properties[i]().length>0){has_property_error=true}}return has_property_error||this.errors.entity().length>0},entity);if(typeof entity.toObject!=="function"){entity.toObject=function(){var i,j,collection,obj={};var self=this;for(i in self.properties){if(self.properties[i].is_entity){obj[i]=self.properties[i].toObject()}else if(self.properties[i].is_entity_collection){collection=self.properties[i]();obj[i]=[];for(j in collection){obj[i].push(collection[j].toObject())}}else{obj[i]=self.properties[i]()}}return obj}}if(typeof entity.fromObject!=="function"){entity.fromObject=function(obj){var i,j,collection,ent,self=this;if(!obj){throw"Solum.js - entity.fromObject: Cannot construct entity from object, object is undefined"}for(i in self.properties){if(self.properties[i].is_entity){self.properties[i].fromObject(obj[i])}else if(self.properties[i].is_entity_collection){collection=obj[i];var new_collection=[];for(j in collection){ent=api.constructEntity(self.properties[i].entity_type);ent.fromObject(collection[j]);new_collection.push(ent)}self.properties[i](new_collection)}else{self.properties[i](obj[i])}}return obj}}if(typeof entity.reset!=="function"){entity.reset=function(){var i,self=this;for(i in self.properties){if(self.properties[i].is_entity){self.properties[i].reset()}else if(self.properties[i].is_entity_collection){self.properties[i].removeAll()}else{self.properties[i](undefined)}}return self}}};api.constructEntity=function(name,raw_obj){if(typeof name!=="string"){throw"The entity name must be a string"}var entity=new api.entities[name](api);decorateEntity(entity);if(raw_obj){entity.fromObject(raw_obj)}return entity};api.instances={};getSingleton=function(group,name,config,isReset){var isRightType,doesGroupExist,doesSvcExist;isRightType=typeof group==="string"&&typeof name==="string";doesGroupExist=typeof api.services[group]==="object";doesSvcExist=doesGroupExist&&typeof api.services[group][name]==="function";if(!isRightType||!doesSvcExist){throw"The requested service does not exist. Group: "+group+" , name: "+name}if(typeof api.instances[group]!=="object"){api.instances[group]={};api.instances[group][name]=null}if(api.instances[group][name]===null||isReset){api.instances[group][name]=new api.services[group][name](config)}return api.instances[group][name]};api.getService=function(group,name,config){return getSingleton(group,name,config,false)};api.configureService=function(group,name,config){return getSingleton(group,name,config,true)};api.services={};return api}();solum.services.ajax=require("./solum/services/ajax");solum.addAjaxRoutes=solum.services.ajax.addAjaxRoutes;solum.services.validation=require("./solum/services/validation");solum.constructConstraint=solum.services.validation.constraints.constructConstraint;solum.services.translation=require("./solum/services/translation");solum.addDictionary=solum.services.translation.addDictionary;solum.services.storage=require("./solum/services/storage");solum.components.tables=require("./solum/components/tables");solum.components.dates=require("./solum/components/dates");solum.entities.DateRange=require("./solum/entities/DateRange");solum.entities.Primitive=require("./solum/entities/Primitive");module.exports=solum;this.solum=solum})()},{"./solum/services/ajax":2,"./solum/services/validation":3,"./solum/services/translation":4,"./solum/services/storage":5,"./solum/components/tables":6,"./solum/components/dates":7,"./solum/entities/DateRange":8,"./solum/entities/Primitive":9}],2:[function(require,module,exports){(function(){module.exports=function(){"use strict";var routes;var ajax={};ajax.routes={exampleRoute:{name:"exampleRoute",url:"/example/{param}",method:"GET",params:[{name:"param",defaultValue:"my default"}]}};ajax.defaultConfig={prefix:"",ajax:$.ajax,badRequestHandler:function(){},errorHandler:function(){},suffix:"",requestWrapper:null,locale:"en"};ajax.manager=function(config){var self,prefix,ajaxMethod,badRequestHandler,errorHandler,suffix,requestWrapper,locale;self=this;config=$.extend({},ajax.defaultConfig,config);prefix=config.prefix;ajaxMethod=config.ajax;badRequestHandler=config.badRequestHandler;errorHandler=config.errorHandler;suffix=config.suffix;requestWrapper=config.requestWrapper;locale=config.locale;this.status=ko.observable("OK");this.pendingRequests=[];this.isOK=ko.computed(function(){return this.status()==="OK"},this);this.isLoading=ko.computed(function(){return this.status()==="LOADING"},this);this.isFailed=ko.computed(function(){return this.status()==="FAILED"},this);this.isBadRequest=ko.computed(function(){return this.status()==="BAD_REQUEST"},this);this.generateURL=function(routeName,params,should_generate_query_string,return_base_path_url){var route,data,url,i,isDataUndefined,doesParamNotExist;if(typeof ajax.routes[routeName]!=="object"){throw"AjaxManager.generateURL(): The requested route does not exist: "+routeName}else{route=ajax.routes[routeName]}if(route.requires_locale&&route.url.indexOf(locale+"/")<0){route.url=locale+"/"+route.url}url=return_base_path_url?route.url:prefix+route.url+suffix;for(i in route.params){if(route.params.hasOwnProperty(i)){isDataUndefined=typeof params.routeData==="undefined";doesParamNotExist=typeof params.routeData[route.params[i].name]==="undefined";doesParamNotExist=doesParamNotExist&&typeof route.params[i].defaultValue==="undefined";if(isDataUndefined||doesParamNotExist){throw"AjaxManager.generateURL: A required parameter was not included in the request: "+route.params[i].name}else if(typeof params.routeData[route.params[i].name]!=="undefined"){url=url.replace("{"+route.params[i].name+"}",params.routeData[route.params[i].name])}else if(typeof route.params[i].defaultValue!=="undefined"){url=url.replace("{"+route.params[i].name+"}",route.params[i].defaultValue)}}}if(should_generate_query_string){if(requestWrapper){data={};data[requestWrapper]=params.data}else{data=params.data}url+="?"+jQuery.param(data)}return url};this.request=function(routeName,params,success,error_callbacks){if(typeof ajax.routes[routeName]!=="object"){throw"AjaxManager.request(): The requested route does not exist"}if(ajax.routes[routeName].method==="post"&&!params.data){throw"AjaxManager.request(): params.data must exist if you are posting."}return self.makeRequest(ajax.routes[routeName],params,success,error_callbacks)};this.makeRequest=function(route,params,success,error_callbacks){var cnt,url,data,request;error_callbacks=error_callbacks||{};self.status("LOADING");cnt=self.pendingRequests.length;if(cnt>0&&(!params.isSimultaneousRequest||params.abortAllPendingRequests)){cnt=0;$.each(self.pendingRequests,function(idx,$ajaxInstance){if(typeof $ajaxInstance!=="object"||$ajaxInstance===null){return}if(!$ajaxInstance.isSimultaneousRequest||params.abortAllPendingRequests){$ajaxInstance.abort()}})}url=self.generateURL(route.name,params);if(requestWrapper){data={};data[requestWrapper]=params.data}else{data=params.data}var setStatusIfNoRequestsPending=function(status){var i,is_request_still_running=false;for(i in self.pendingRequests){if(self.pendingRequests[i]!==null){is_request_still_running=true}}if(!is_request_still_running){self.status(status)}};request=ajaxMethod({url:url,type:route.method,data:data,timeout:6e5,success:function(data,textStatus,jqXHR){self.pendingRequests[cnt]=null;setStatusIfNoRequestsPending("OK");return success(data)},statusCode:{400:function(jqXHR,textStatus,errorThrown){var callback=badRequestHandler;self.pendingRequests[cnt]=null;setStatusIfNoRequestsPending("BAD_REQUEST");if(typeof error_callbacks[400]==="function"){callback=error_callbacks[400]}return callback(jqXHR,textStatus,errorThrown)},403:function(jqXHR,textStatus,errorThrown){var callback=badRequestHandler;setStatusIfNoRequestsPending("BAD_REQUEST");self.pendingRequests[cnt]=null;if(typeof error_callbacks[403]==="function"){callback=error_callbacks[403]}return callback(jqXHR,textStatus,errorThrown)},500:function(jqXHR,textStatus,errorThrown){var callback=errorHandler;self.status("FAILED");self.pendingRequests[cnt]=null;if(typeof error_callbacks[500]==="function"){callback=error_callbacks[500]}return callback(jqXHR,textStatus,errorThrown)}},error:function(jqXHR,textStatus,errorThrown){self.pendingRequests[cnt]=null;setStatusIfNoRequestsPending("BAD_REQUEST");if(textStatus==="abort"&&typeof error_callbacks["abort"]==="function"){return error_callbacks["abort"](jqXHR,textStatus,errorThrown)}else if(typeof error_callbacks["error"]==="function"){return error_callbacks["error"](jqXHR,textStatus,errorThrown)}else{return errorHandler(jqXHR,textStatus,errorThrown)}}});request.route=route.name;request.isSimultaneousRequest=params.isSimultaneousRequest;self.pendingRequests[cnt]=request;return request}};routes=ajax.routes;ajax.addAjaxRoutes=function(newRoutes){$.extend(routes,newRoutes)};return ajax}()})()},{}],4:[function(require,module,exports){(function(){module.exports=function(root){"use strict";var translation={};translation.dictionary={en:{}};translation.addDictionary=function(dict){translation.dictionary=$.extend(true,{},dict,translation.dictionary)};translation.defaultConfig={locale:"en"};translation.translator=function(config){var self,locale,dictionary,translations,localized_format;config=$.extend({},translation.defaultConfig,config);self=this;locale=config.locale;dictionary=translation.dictionary;translations=dictionary[locale];self.translate=function(text,replace){var key,keys,trans,i,j,r,v;keys=text.split(".");trans=translations;for(j in keys){if(keys.hasOwnProperty(j)){if(typeof trans[keys[j]]==="string"||typeof trans[keys[j]]==="object"){trans=trans[keys[j]]}else{trans=text}}}for(i in replace){if(replace.hasOwnProperty(i)){key="%"+i+"%";if(!replace[i].mustTranslate){trans=trans.replace(key,replace[i])}else{r=replace[i];v=r.value;if(r.type==="date"){v=self.dateToLocalizedString(v)}else if(r.type==="number"){v=self.numberToLocalizedNumberString(v)}else if(r.type==="currency"){v=self.numberToLocalizedCurrencyString(v)}else{v=self.translate(v)}trans=trans.replace(key,v)}}}return trans};self.dateToLocalizedString=function(dateObj){if(!(dateObj instanceof Date)){throw"Translator.dateToLocalizedString: tried to translate a non-date object."}return dateObj.toString(localized_format.date.format)};self.numberToLocalizedNumberString=function(num){};self.numberToLocalizedCurrencyString=function(num){}};return translation}()})()},{}],5:[function(require,module,exports){(function(){module.exports=function(){"use strict";var storage={};storage.HTML5={};storage.HTML5.defaultConfig={ttl:7*24*60*60*1e3,namespace:"",storage:localStorage};storage.HTML5.manager=function(config){var MetaDataWrapper,storageApi,ttl,namespace,storage,isStorageAvailable,maxedOut,isMaxedOut,apiAccessor;config=$.extend(config,storage.HTML5.defaultConfig);MetaDataWrapper=function(value,ttl){var now=new Date;this.created=now.getTime();this.ttl=ttl;this.value=value};storageApi={};ttl=config.ttl;namespace=config.namespace;storage=config.storage;isStorageAvailable=typeof localStorage==="object"&&localStorage!==null;isStorageAvailable=isStorageAvailable&&typeof sessionStorage==="object"&&sessionStorage!==null;maxedOut=false;isMaxedOut=function(){return isMaxedOut};storageApi.save=function(key,value){if(maxedOut){return false}var w=new MetaDataWrapper(value,ttl);storage[key]=JSON.stringify(w);try{w=new MetaDataWrapper(value,ttl);storage[key]=JSON.stringify(w)}catch(e){if(e!=="QUOTA_EXCEEDED_ERR"){throw e}maxedOut=true;return false}return true};storageApi.get=function(key){var badValues,type,o,created,ttl,d;badValues={"null":true,undefined:true,"false":true};type=typeof storage[key];if(type==="undefined"||badValues[type]){return null}o=JSON.parse(storage[key]);created=Number(o.created);ttl=Number(o.ttl);if(typeof o!=="object"||created===0||isNaN(created)||isNaN(ttl)){return null}d=new Date;if(d.getTime()-created>ttl){storageApi.remove(key);return null}return o.value};storageApi.remove=function(key){storage.removeItem(key);maxedOut=false};storageApi.clear=function(){storage.clear();maxedOut=false};apiAccessor=function(method,key,value){if(typeof method!=="string"||typeof storageApi[method]!=="function"){throw"StorageManager: Method was not a string or does not exist, got type: "+typeof method}if(!isStorageAvailable){return false}var nskey=namespace+key;return storageApi[method](nskey,value)};apiAccessor.isMaxedOut=isMaxedOut;return apiAccessor};return storage}()})()},{}],6:[function(require,module,exports){(function(){module.exports=function(){"use strict";var api={};api.paginatedTable=function(){if(!(this instanceof api.paginatedTable)){return new api.paginatedTable}var self,tableApi;self=this;tableApi={};tableApi.list=ko.observableArray([]);tableApi.page=new api.page;tableApi.view={};tableApi.view.afterRender=function(){};tableApi.view.afterAdd=function(){};tableApi.view.beforeRemove=function(){};tableApi.addItem=function(item){self.list.push(item)};tableApi.addItems=function(items){var i;if(typeof items!=="object"||items===null){throw"Add items helper requires an array. Received: "+typeof items}for(i in items){if(items.hasOwnProperty(i)){self.addItem(items[i])}}return items};tableApi.removeItems=function(key,value){var list,temp,i;list=self.list();temp=[];for(i in list){if(list.hasOwnProperty(i)&&(typeof list[i][key]==="undefined"||list[i][key]!==value)){temp.push(list[i])}}self.empty();self.addItems(temp)};tableApi.empty=function(){self.list.splice(0,self.list().length)};tableApi.reload=function(items){self.empty();self.addItems(items)};this.list=tableApi.list;this.view=tableApi.view;this.page=tableApi.page;this.addItem=tableApi.addItem;this.addItems=tableApi.addItems;this.removeItems=tableApi.removeItems;this.empty=tableApi.empty;this.reload=tableApi.reload};api.groupedList=function(){var self,groupedListApi,empty;if(!(this instanceof api.groupedList)){return new api.groupedList}self=this;groupedListApi={};groupedListApi.groupedList=ko.observableArray([]);groupedListApi.table=new api.paginatedTable;groupedListApi.view={};groupedListApi.view.afterRender=function(){};groupedListApi.view.afterAdd=function(){};groupedListApi.view.beforeRemove=function(){};groupedListApi.groupBy=ko.observable(null);groupedListApi.setGroupBy=function(p){self.groupBy(p);self.groupItems()};empty=function(){self.groupedList.splice(0,self.groupedList().length)};groupedListApi.groupItems=function(){var p,list,temp,i,t;p=self.groupBy();empty();list=self.table.list();if(!p){self.groupedList.push({property:null,entries:list.slice(0)});return}temp={};for(i in list){if(list.hasOwnProperty(i)){if(typeof list[i][p]==="undefined"){throw"GroupedList.groupItems: group by property does not exist on one or more elements."}else{if(typeof temp[list[i][p]]!=="object"){temp[list[i][p]]=[]}temp[list[i][p]].push(list[i])}}}t=null;for(i in temp){if(temp.hasOwnProperty(i)){t={property:i,entries:temp[i]};self.groupedList.push(t)}}};this.groupedList=groupedListApi.groupedList;this.table=groupedListApi.table;this.view=groupedListApi.view;this.groupBy=groupedListApi.groupBy;this.setGroupBy=groupedListApi.setGroupBy;this.groupItems=groupedListApi.groupItems};api.page=function(){var self,setSort;if(!(this instanceof api.page)){return new api.page}self=this;self.onChange=function(){return self};self.page=ko.observable(1);self.getPage=function(){return self.page()};self.setPage=function(num){var retVal=false;if(typeof num!=="number"){throw"Page: setPage only accepts a number"}if(num>=1&&num<=self.getTotalPages()&&num!==self.page()){self.page(num);retVal=self.onChange()}return retVal};self.first=function(){return self.setPage(1)};self.next=function(){return self.setPage(self.page()+1)};self.previous=function(){return self.setPage(self.page()-1)};self.last=function(){return self.setPage(self.totalPages())};self.setPageToFirstAndTriggerOnChange=function(){var ret;if(self.getPage()!==1){ret=self.first()}else{ret=self.onChange()}return ret};self.totalPages=ko.observable(0);self.getTotalPages=function(){return self.totalPages()};self.totalCount=ko.observable(0);self.getTotalCount=function(){return self.totalCount()};self.setTotalCount=function(num){if(typeof num!=="number"){throw"Total count must be a number"}self.totalCount(num);self.totalPages(Math.ceil(self.totalCount()/self.pageSize()));return self};self.defaultPageSize=25;self.pageSize=ko.observable(self.defaultPageSize);self.getPageSize=function(){return self.pageSize()};self.setPageSize=function(num){var retVal=false;if(typeof num!=="number"){throw"Page size must be a number"}if(num!=self.getPageSize()){self.pageSize(num);self.totalPages(Math.ceil(self.totalCount()/self.pageSize()));self.setPageToFirstAndTriggerOnChange();retVal=true}return retVal};self.loadMore=function(){var ret;if(self.pageSize()>=self.totalCount()){ret=false}else{ret=self.setPageSize(self.pageSize()+self.defaultPageSize)}return ret};self.hasMore=ko.computed(function(){return self.pageSize()<self.totalCount()});self.isFirstPage=ko.computed(function(){return self.page()===1});self.isNotFirstPage=ko.computed(function(){return self.page()!==1});self.isLastPage=ko.computed(function(){return self.page()===self.totalPages()});self.isNotLastPage=ko.computed(function(){return self.page()<self.totalPages()});self.sortCol=ko.observable(0);self.getSortCol=function(){return self.sortCol()};self.setSortCol=function(num){if(typeof num!=="number"){throw"Sort column must be a number"}self.sortCol(num);self.setPageToFirstAndTriggerOnChange()};self.sortDir=ko.observable("A");self.getSortDir=function(){return self.sortDir()};self.setSortDir=function(dir){if(dir!=="A"&&dir!=="D"){throw"Sort direction must be 'A' or 'D'"}self.sortDir(dir);self.setPageToFirstAndTriggerOnChange()};setSort=function(col,dir){self.sortCol(col);self.sortDir(dir);self.setPageToFirstAndTriggerOnChange()};self.toggleSort=function(colIdx){var sort,dir,ret;sort=null;dir="A";if(colIdx!==self.getSortCol()){dir="A";ret=setSort(colIdx,dir)}else{dir=self.getSortDir()==="A"?"D":"A";ret=setSort(colIdx,dir)}return ret};self.toObj=function(){return{page:self.page(),limit:self.pageSize(),sort_col:self.getSortCol(),sort_dir:self.getSortDir()}};self.fromObj=function(obj){if(typeof obj!=="object"||obj===null){throw"Page: fromObj() accepts only an object with the appropriate properties"}self.setTotalCount(obj.total_rows);self.page(obj.page);return self}};api.tree=function(){if(!(this instanceof api.tree)){return new api.tree}var self=this;self.raw=new api.paginatedTable;self.hierarchy=new ko.observable({});self.reset=function(){self.hierarchy({})};self.addItems=function(items){self.raw.addItems(items);self.createHierarchyFromRawList()};self.createHierarchyFromRawList=function(delim){var list,hierarchy,i,filepath,current,j,a,s,lastIdx;delim=typeof delim==="undefined"?"/":delim;list=self.raw.list();hierarchy={};for(i in list){filepath=list[i].split(delim);current=hierarchy;lastIdx=filepath.length-1;for(j in filepath){s=filepath[j];if(j==lastIdx){current[s]=list[i]}else if(typeof current[s]!=="object"&&s!==""){current[s]={};current=current[s]}else if(s!==""){current=current[s]}}}self.hierarchy(hierarchy)};return self};return api}()})()},{}],7:[function(require,module,exports){(function(){module.exports=function(){var api={};api.SmartDate=function(){var self=this;self.slug=ko.observable();self.name=null;self.dates={start:ko.observable(),end:ko.observable()};self.fromJSON=function(data){self.slug(data.slug);self.name=data.name;self.dates.start(data.dates.start);self.dates.end(data.dates.end)}};api.smartDateMenu={};api.DateRange=function(root){var self,ignoreDateSubscription;self=this;self.selectedSmartDate=ko.observable();self.selectedSmartDateSlug=ko.observable();self.validator=root.getService("validation","validator");self.hasChanged=false;self.dates=new root.constructEntity("DateRange");self.smartDates=ko.observableArray([]);self.addSmartDates=function(smart_dates){var i,sd;for(i in smart_dates){if(smart_dates.hasOwnProperty(i)){sd=new api.SmartDate;sd.fromJSON(smart_dates[i]);self.smartDates.push(sd)}}};self.selectedSmartDateSlug.subscribe(function(selectedSlug){var s,found,i,start,end;s=self.smartDates();found=false;for(i in s){if(s.hasOwnProperty(i)&&s[i].slug()===selectedSlug){self.selectedSmartDate(s[i]);found=true}}if(found){start=self.selectedSmartDate().dates.start();end=self.selectedSmartDate().dates.end();ignoreDateSubscription=true;self.dates.start(start);self.dates.end(end);ignoreDateSubscription=false}});ignoreDateSubscription=false;self.updateToCustom=function(){var start,end;start=self.dates.start();end=self.dates.end();self.hasChanged=true;self.validator.isEntityValid(self.dates);if(self.selectedSmartDateSlug()!=="custom"&&!ignoreDateSubscription){self.selectedSmartDateSlug("custom");self.dates.start(start);self.dates.end(end)}};self.dates.start.subscribe(self.updateToCustom);self.dates.end.subscribe(self.updateToCustom);self.isCustomSelected=ko.computed(function(){return self.selectedSmartDateSlug()==="custom"},this)};return api}()})()},{}],9:[function(require,module,exports){var Primitive=function Primitive(){var self=this;this.properties={};this.properties.value=ko.observable();this.constraints={};this.constraints.properties={value:[]}};Primitive.prototype.toObject=function(){return this.value()};Primitive.prototype.fromObject=function(value){this.value(value)};module.exports=Primitive},{}],3:[function(require,module,exports){(function(){module.exports=function(){"use strict";var validation={};validation.defaultConfig={};validation.validator=function(config){var self;self=this;config=$.extend(config,validation.defaultConfig);self.isEntityValid=function(entity){var is_valid,are_sub_entities_valid,i,j,errors,curr_check=true;is_valid=true;are_sub_entities_valid=true;entity.errors.entity.removeAll();for(i in entity.properties){curr_check=self.isPropertyValid(entity.properties[i]);is_valid=is_valid&&curr_check}if(is_valid){errors=self.isValid(entity,entity.constraints.entity_constraints);is_valid=errors.length===0;for(j in errors){entity.errors.entity.push(errors[j])}}return is_valid};self.isPropertyValid=function(property,ignore_subentities){var is_valid=true;var ent=property.__parent,key=property.__name,constraints=ent.constraints.properties[key],errors=ent.errors.properties[key],err_msgs=null;errors.removeAll();if(property.is_entity){var are_sub_entities_valid=ignore_subentities?true:self.isEntityValid(property);if(!are_sub_entities_valid){errors.push("errors.form.sub_entity.invalid");is_valid=false}err_msgs=self.isValid(property,constraints)}else if(property.is_entity_collection){var collection=property(),curr_msgs,is_current_valid;if(!ignore_subentities){for(var i in collection){is_current_valid=self.isEntityValid(collection[i]);is_valid=is_valid&&is_current_valid}}err_msgs=self.isValid(property(),constraints)}else{err_msgs=self.isValid(property(),constraints)}if(err_msgs.length>0){is_valid=false}for(var j in err_msgs){errors.push(err_msgs[j])}return is_valid};self.isValid=function(subject,constraint_list){var errors,isFailed,i;errors=[];for(i in constraint_list){isFailed=false;if(constraint_list.hasOwnProperty(i)){try{if(constraint_list[i].params){constraint_list[i].params.validator=self}constraint_list[i].test(subject)}catch(e){errors.push(e.error);isFailed=true}if(isFailed&&!constraint_list[i].continueOnFail)break}}return errors}};validation.constraints={};validation.constraints.constructConstraint=function(group,name,params,msg){var constraints=validation.constraints;if(!constraints[group]||!constraints[group][name]){throw"ConstructConstraint: Constraint not found : "+name}return new validation.constraints[group][name](params,msg)};validation.constraints.abstractConstraint=function(params,msg){this.msg=msg;this.params=params;this.continueOnFail=false;this.test=function(subject){throw{error:self.msg}}};validation.constraints.general=require("./constraints/general");validation.constraints.date=require("./constraints/date");validation.constraints.string=require("./constraints/string");validation.constraints.collection=require("./constraints/collection");return validation}()})()},{"./constraints/general":10,"./constraints/date":11,"./constraints/string":12,"./constraints/collection":13}],12:[function(require,module,exports){module.exports=function(){"use strict";var string={};string.minLength=function(params,msg){var self=this;self.defaultMsg="errors.form.string.min_length";self.msg=msg?msg:self.defaultMsg;self.params=params;self.test=function(subject){if(subject.length<self.params.min){throw{error:self.msg}}return true}};string.maxLength=function(params,msg){var self=this;self.defaultMsg="errors.form.string.max_length";self.msg=msg?msg:self.defaultMsg;self.params=params;this.test=function(subject){if(self.params.is_optional&&!subject){return true}if(subject.length>self.params.max){throw{error:self.msg}}return true}};string.match=function(params,msg){var self=this;self.defaultMsg="errors.form.string.match";self.msg=msg?msg:self.defaultMsg;self.params=params;this.test=function(subject){if(self.params.is_optional&&!subject){return true}if(!self.params.regex.test(subject)){throw{error:self.msg}}return true}};return string}()},{}],8:[function(require,module,exports){(function(){var moment=require("moment");module.exports=function(solum){var self=this,format="YYYY-MM-DD",format_regex=/^[0-9]{4}-[0-1]{1}[0-9]{1}-[0-3]{1}[0-9]{1}$/;this.properties={};this.properties.start=ko.observable("");this.properties.end=ko.observable("");var max_range_constraint={};max_range_constraint.name="Date Range - Range greater than x duration";max_range_constraint.params={max:3,unit:"years"};max_range_constraint.msg="errors.form.date.max_range";max_range_constraint.test=function(){if(self.errors.properties.start().length>0||self.errors.properties.end().length>0){return}var start_moment=moment(self.properties.start(),format);var end_moment=moment(self.properties.end(),format);if(start_moment.diff(end_moment,this.params.unit)>this.params.max){throw{error:this.msg,constraint:this.params.max}}};var min_range_constraint={};min_range_constraint.name="Date Range - start before end";min_range_constraint.params={min:0,unit:"days"};min_range_constraint.msg="errors.form.date.min_range";min_range_constraint.test=function(){if(self.errors.properties.start().length>0||self.errors.properties.end().length>0){return}var start_moment=moment(self.properties.start(),format);var end_moment=moment(self.properties.end(),format);if(start_moment.diff(end_moment,this.params.unit)>this.params.min){throw{error:this.msg,constraint:this.params.max}}};var min_params={format:format,format_regex:format_regex,min:moment().subtract("years",3).startOf("year")};var max_params={format:format,format_regex:format_regex,max:moment().startOf("day")};this.constraints={};this.constraints.entity=[];this.constraints.properties={start:[solum.constructConstraint("general","notNull",{},"errors.form.date.not_null"),solum.constructConstraint("date","isValid",{format:format,format_regex:format_regex}),solum.constructConstraint("date","min",min_params),solum.constructConstraint("date","max",max_params),min_range_constraint,max_range_constraint],end:[solum.constructConstraint("general","notNull",{},"errors.form.date.not_null"),solum.constructConstraint("date","isValid",{format:format,format_regex:format_regex}),solum.constructConstraint("date","min",min_params),solum.constructConstraint("date","max",max_params),min_range_constraint,max_range_constraint]}}})()},{moment:14}],14:[function(require,module,exports){(function(){(function(undefined){var moment,VERSION="2.0.0",round=Math.round,i,languages={},hasModule=typeof module!=="undefined"&&module.exports,aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,parseMultipleFormatChunker=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{1,4}/,parseTokenSixDigits=/[+\-]?\d{1,6}/,parseTokenWord=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/i,parseTokenT=/T/i,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,isoRegex=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoTimes=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,proxyGettersAndSetters="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),unitMillisecondFactors={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},formatFunctions={},ordinalizeTokens="DDD w W M D d".split(" "),paddedTokens="M D H h m s w W".split(" "),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return this.lang().monthsShort(this,format)},MMMM:function(format){return this.lang().months(this,format)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(format){return this.lang().weekdaysMin(this,format)},ddd:function(format){return this.lang().weekdaysShort(this,format)},dddd:function(format){return this.lang().weekdays(this,format)},w:function(){return this.week()},W:function(){return this.isoWeek()
},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return leftZeroFill(~~(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";if(a<0){a=-a;b="-"}return b+leftZeroFill(~~(a/60),2)+":"+leftZeroFill(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";if(a<0){a=-a;b="-"}return b+leftZeroFill(~~(10*a/6),4)},X:function(){return this.unix()}};function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}function ordinalizeToken(func){return function(a){return this.lang().ordinal(func.call(this,a))}}while(ordinalizeTokens.length){i=ordinalizeTokens.pop();formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i])}while(paddedTokens.length){i=paddedTokens.pop();formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2)}formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3);function Language(){}function Moment(config){extend(this,config)}function Duration(duration){var data=this._data={},years=duration.years||duration.year||duration.y||0,months=duration.months||duration.month||duration.M||0,weeks=duration.weeks||duration.week||duration.w||0,days=duration.days||duration.day||duration.d||0,hours=duration.hours||duration.hour||duration.h||0,minutes=duration.minutes||duration.minute||duration.m||0,seconds=duration.seconds||duration.second||duration.s||0,milliseconds=duration.milliseconds||duration.millisecond||duration.ms||0;this._milliseconds=milliseconds+seconds*1e3+minutes*6e4+hours*36e5;this._days=days+weeks*7;this._months=months+years*12;data.milliseconds=milliseconds%1e3;seconds+=absRound(milliseconds/1e3);data.seconds=seconds%60;minutes+=absRound(seconds/60);data.minutes=minutes%60;hours+=absRound(minutes/60);data.hours=hours%24;days+=absRound(hours/24);days+=weeks*7;data.days=days%30;months+=absRound(days/30);data.months=months%12;years+=absRound(months/12);data.years=years}function extend(a,b){for(var i in b){if(b.hasOwnProperty(i)){a[i]=b[i]}}return a}function absRound(number){if(number<0){return Math.ceil(number)}else{return Math.floor(number)}}function leftZeroFill(number,targetLength){var output=number+"";while(output.length<targetLength){output="0"+output}return output}function addOrSubtractDurationFromMoment(mom,duration,isAdding){var ms=duration._milliseconds,d=duration._days,M=duration._months,currentDate;if(ms){mom._d.setTime(+mom+ms*isAdding)}if(d){mom.date(mom.date()+d*isAdding)}if(M){currentDate=mom.date();mom.date(1).month(mom.month()+M*isAdding).date(Math.min(currentDate,mom.daysInMonth()))}}function isArray(input){return Object.prototype.toString.call(input)==="[object Array]"}function compareArrays(array1,array2){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(~~array1[i]!==~~array2[i]){diffs++}}return diffs+lengthDiff}Language.prototype={set:function(config){var prop,i;for(i in config){prop=config[i];if(typeof prop==="function"){this[i]=prop}else{this["_"+i]=prop}}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(m){return this._months[m.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(m){return this._monthsShort[m.month()]},monthsParse:function(monthName){var i,mom,regex,output;if(!this._monthsParse){this._monthsParse=[]}for(i=0;i<12;i++){if(!this._monthsParse[i]){mom=moment([2e3,i]);regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,"");this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")}if(this._monthsParse[i].test(monthName)){return i}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(m){return this._weekdays[m.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(m){return this._weekdaysShort[m.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(m){return this._weekdaysMin[m.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(key){var output=this._longDateFormat[key];if(!output&&this._longDateFormat[key.toUpperCase()]){output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)});this._longDateFormat[key]=output}return output},meridiem:function(hours,minutes,isLower){if(hours>11){return isLower?"pm":"PM"}else{return isLower?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(key,mom){var output=this._calendar[key];return typeof output==="function"?output.apply(mom):output},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return typeof output==="function"?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},pastFuture:function(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return typeof format==="function"?format(output):format.replace(/%s/i,output)},ordinal:function(number){return this._ordinal.replace("%d",number)},_ordinal:"%d",preparse:function(string){return string},postformat:function(string){return string},week:function(mom){return weekOfYear(mom,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}};function loadLang(key,values){values.abbr=key;if(!languages[key]){languages[key]=new Language}languages[key].set(values);return languages[key]}function getLangDefinition(key){if(!key){return moment.fn._lang}if(!languages[key]&&hasModule){require("./lang/"+key)}return languages[key]}function removeFormattingTokens(input){if(input.match(/\[.*\]/)){return input.replace(/^\[|\]$/g,"")}return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]]}else{array[i]=removeFormattingTokens(array[i])}}return function(mom){var output="";for(i=0;i<length;i++){output+=typeof array[i].call==="function"?array[i].call(mom,format):array[i]}return output}}function formatMoment(m,format){var i=5;function replaceLongDateFormatTokens(input){return m.lang().longDateFormat(input)||input}while(i--&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens)}if(!formatFunctions[format]){formatFunctions[format]=makeFormatFunction(format)}return formatFunctions[format](m)}function getParseRegexForToken(token){switch(token){case"DDDD":return parseTokenThreeDigits;case"YYYY":return parseTokenFourDigits;case"YYYYY":return parseTokenSixDigits;case"S":case"SS":case"SSS":case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return parseTokenWord;case"X":return parseTokenTimestampMs;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return parseTokenOneOrTwoDigits;default:return new RegExp(token.replace("\\",""))}}function addTimeToArrayFromToken(token,input,config){var a,b,datePartArray=config._a;switch(token){case"M":case"MM":datePartArray[1]=input==null?0:~~input-1;break;case"MMM":case"MMMM":a=getLangDefinition(config._l).monthsParse(input);if(a!=null){datePartArray[1]=a}else{config._isValid=false}break;case"D":case"DD":case"DDD":case"DDDD":if(input!=null){datePartArray[2]=~~input}break;case"YY":datePartArray[0]=~~input+(~~input>68?1900:2e3);break;case"YYYY":case"YYYYY":datePartArray[0]=~~input;break;case"a":case"A":config._isPm=(input+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":datePartArray[3]=~~input;break;case"m":case"mm":datePartArray[4]=~~input;break;case"s":case"ss":datePartArray[5]=~~input;break;case"S":case"SS":case"SSS":datePartArray[6]=~~(("0."+input)*1e3);break;case"X":config._d=new Date(parseFloat(input)*1e3);break;case"Z":case"ZZ":config._useUTC=true;a=(input+"").match(parseTimezoneChunker);if(a&&a[1]){config._tzh=~~a[1]}if(a&&a[2]){config._tzm=~~a[2]}if(a&&a[0]==="+"){config._tzh=-config._tzh;config._tzm=-config._tzm}break}if(input==null){config._isValid=false}}function dateFromArray(config){var i,date,input=[];if(config._d){return}for(i=0;i<7;i++){config._a[i]=input[i]=config._a[i]==null?i===2?1:0:config._a[i]}input[3]+=config._tzh||0;input[4]+=config._tzm||0;date=new Date(0);if(config._useUTC){date.setUTCFullYear(input[0],input[1],input[2]);date.setUTCHours(input[3],input[4],input[5],input[6])}else{date.setFullYear(input[0],input[1],input[2]);date.setHours(input[3],input[4],input[5],input[6])}config._d=date}function makeDateFromStringAndFormat(config){var tokens=config._f.match(formattingTokens),string=config._i,i,parsedInput;config._a=[];for(i=0;i<tokens.length;i++){parsedInput=(getParseRegexForToken(tokens[i]).exec(string)||[])[0];if(parsedInput){string=string.slice(string.indexOf(parsedInput)+parsedInput.length)}if(formatTokenFunctions[tokens[i]]){addTimeToArrayFromToken(tokens[i],parsedInput,config)}}if(config._isPm&&config._a[3]<12){config._a[3]+=12}if(config._isPm===false&&config._a[3]===12){config._a[3]=0}dateFromArray(config)}function makeDateFromStringAndArray(config){var tempConfig,tempMoment,bestMoment,scoreToBeat=99,i,currentDate,currentScore;while(config._f.length){tempConfig=extend({},config);tempConfig._f=config._f.pop();makeDateFromStringAndFormat(tempConfig);tempMoment=new Moment(tempConfig);if(tempMoment.isValid()){bestMoment=tempMoment;break}currentScore=compareArrays(tempConfig._a,tempMoment.toArray());if(currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempMoment}}extend(config,bestMoment)}function makeDateFromString(config){var i,string=config._i;if(isoRegex.exec(string)){config._f="YYYY-MM-DDT";for(i=0;i<4;i++){if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}}if(parseTokenTimezone.exec(string)){config._f+=" Z"}makeDateFromStringAndFormat(config)}else{config._d=new Date(string)}}function makeDateFromInput(config){var input=config._i,matched=aspNetJsonRegex.exec(input);if(input===undefined){config._d=new Date}else if(matched){config._d=new Date(+matched[1])}else if(typeof input==="string"){makeDateFromString(config)}else if(isArray(input)){config._a=input.slice(0);dateFromArray(config)}else{config._d=input instanceof Date?new Date(+input):new Date(input)}}function substituteTimeAgo(string,number,withoutSuffix,isFuture,lang){return lang.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime(milliseconds,withoutSuffix,lang){var seconds=round(Math.abs(milliseconds)/1e3),minutes=round(seconds/60),hours=round(minutes/60),days=round(hours/24),years=round(days/365),args=seconds<45&&["s",seconds]||minutes===1&&["m"]||minutes<45&&["mm",minutes]||hours===1&&["h"]||hours<22&&["hh",hours]||days===1&&["d"]||days<=25&&["dd",days]||days<=45&&["M"]||days<345&&["MM",round(days/30)]||years===1&&["y"]||["yy",years];args[2]=withoutSuffix;args[3]=milliseconds>0;args[4]=lang;return substituteTimeAgo.apply({},args)}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day();if(daysToDayOfWeek>end){daysToDayOfWeek-=7}if(daysToDayOfWeek<end-7){daysToDayOfWeek+=7}return Math.ceil(moment(mom).add("d",daysToDayOfWeek).dayOfYear()/7)}function makeMoment(config){var input=config._i,format=config._f;if(input===null||input===""){return null}if(typeof input==="string"){config._i=input=getLangDefinition().preparse(input)}if(moment.isMoment(input)){config=extend({},input);config._d=new Date(+input._d)}else if(format){if(isArray(format)){makeDateFromStringAndArray(config)}else{makeDateFromStringAndFormat(config)}}else{makeDateFromInput(config)}return new Moment(config)}moment=function(input,format,lang){return makeMoment({_i:input,_f:format,_l:lang,_isUTC:false})};moment.utc=function(input,format,lang){return makeMoment({_useUTC:true,_isUTC:true,_l:lang,_i:input,_f:format})};moment.unix=function(input){return moment(input*1e3)};moment.duration=function(input,key){var isDuration=moment.isDuration(input),isNumber=typeof input==="number",duration=isDuration?input._data:isNumber?{}:input,ret;if(isNumber){if(key){duration[key]=input}else{duration.milliseconds=input}}ret=new Duration(duration);if(isDuration&&input.hasOwnProperty("_lang")){ret._lang=input._lang}return ret};moment.version=VERSION;moment.defaultFormat=isoFormat;moment.lang=function(key,values){var i;if(!key){return moment.fn._lang._abbr}if(values){loadLang(key,values)}else if(!languages[key]){getLangDefinition(key)}moment.duration.fn._lang=moment.fn._lang=getLangDefinition(key)};moment.langData=function(key){if(key&&key._lang&&key._lang._abbr){key=key._lang._abbr}return getLangDefinition(key)};moment.isMoment=function(obj){return obj instanceof Moment};moment.isDuration=function(obj){return obj instanceof Duration};moment.fn=Moment.prototype={clone:function(){return moment(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return moment.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()]},isValid:function(){if(this._isValid==null){if(this._a){this._isValid=!compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray())}else{this._isValid=!isNaN(this._d.getTime())}}return!!this._isValid},utc:function(){this._isUTC=true;return this},local:function(){this._isUTC=false;return this},format:function(inputString){var output=formatMoment(this,inputString||moment.defaultFormat);return this.lang().postformat(output)},add:function(input,val){var dur;if(typeof input==="string"){dur=moment.duration(+val,input)}else{dur=moment.duration(input,val)}addOrSubtractDurationFromMoment(this,dur,1);return this},subtract:function(input,val){var dur;if(typeof input==="string"){dur=moment.duration(+val,input)}else{dur=moment.duration(input,val)}addOrSubtractDurationFromMoment(this,dur,-1);return this},diff:function(input,units,asFloat){var that=this._isUTC?moment(input).utc():moment(input).local(),zoneDiff=(this.zone()-that.zone())*6e4,diff,output;if(units){units=units.replace(/s$/,"")}if(units==="year"||units==="month"){diff=(this.daysInMonth()+that.daysInMonth())*432e5;output=(this.year()-that.year())*12+(this.month()-that.month());output+=(this-moment(this).startOf("month")-(that-moment(that).startOf("month")))/diff;if(units==="year"){output=output/12}}else{diff=this-that-zoneDiff;output=units==="second"?diff/1e3:units==="minute"?diff/6e4:units==="hour"?diff/36e5:units==="day"?diff/864e5:units==="week"?diff/6048e5:diff}return asFloat?output:absRound(output)},from:function(time,withoutSuffix){return moment.duration(this.diff(time)).lang(this.lang()._abbr).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(){var diff=this.diff(moment().startOf("day"),"days",true),format=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(format,this))},isLeapYear:function(){var year=this.year();return year%4===0&&year%100!==0||year%400===0},isDST:function(){return this.zone()<moment([this.year()]).zone()||this.zone()<moment([this.year(),5]).zone()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return input==null?day:this.add({d:input-day})},startOf:function(units){units=units.replace(/s$/,"");switch(units){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(units==="week"){this.day(0)}return this},endOf:function(units){return this.startOf(units).add(units.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(input,units){units=typeof units!=="undefined"?units:"millisecond";return+this.clone().startOf(units)>+moment(input).startOf(units)},isBefore:function(input,units){units=typeof units!=="undefined"?units:"millisecond";return+this.clone().startOf(units)<+moment(input).startOf(units)},isSame:function(input,units){units=typeof units!=="undefined"?units:"millisecond";return+this.clone().startOf(units)===+moment(input).startOf(units)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return moment.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(input){var dayOfYear=round((moment(this).startOf("day")-moment(this).startOf("year"))/864e5)+1;return input==null?dayOfYear:this.add("d",input-dayOfYear)},isoWeek:function(input){var week=weekOfYear(this,1,4);return input==null?week:this.add("d",(input-week)*7)},week:function(input){var week=this.lang().week(this);return input==null?week:this.add("d",(input-week)*7)},lang:function(key){if(key===undefined){return this._lang}else{this._lang=getLangDefinition(key);return this}}};function makeGetterAndSetter(name,key){moment.fn[name]=moment.fn[name+"s"]=function(input){var utc=this._isUTC?"UTC":"";if(input!=null){this._d["set"+utc+key](input);return this}else{return this._d["get"+utc+key]()}}}for(i=0;i<proxyGettersAndSetters.length;i++){makeGetterAndSetter(proxyGettersAndSetters[i].toLowerCase().replace(/s$/,""),proxyGettersAndSetters[i])}makeGetterAndSetter("year","FullYear");moment.fn.days=moment.fn.day;moment.fn.weeks=moment.fn.week;moment.fn.isoWeeks=moment.fn.isoWeek;moment.duration.fn=Duration.prototype={weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(withSuffix){var difference=+this,output=relativeTime(difference,!withSuffix,this.lang());if(withSuffix){output=this.lang().pastFuture(difference,output)}return this.lang().postformat(output)},lang:moment.fn.lang};function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}function makeDurationAsGetter(name,factor){moment.duration.fn["as"+name]=function(){return+this/factor}}for(i in unitMillisecondFactors){if(unitMillisecondFactors.hasOwnProperty(i)){makeDurationAsGetter(i,unitMillisecondFactors[i]);makeDurationGetter(i.toLowerCase())}}makeDurationAsGetter("Weeks",6048e5);moment.lang("en",{ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output}});if(hasModule){module.exports=moment}if(typeof ender==="undefined"){this["moment"]=moment}if(typeof define==="function"&&define.amd){define("moment",[],function(){return moment})}}).call(this)})()},{}],10:[function(require,module,exports){var _=require("underscore");module.exports=function(){"use strict";var general={};general.notNull=function(params,msg){var self=this;self.name="general.notNull";self.defaultMsg="errors.form.general.not_null";self.msg=msg?msg:self.defaultMsg;self.params=params;self.test=function(subject){if(subject===""||subject===null||subject===undefined){throw{error:self.msg}}return true}};general.equals=function(params,msg){var self=this;self.name="general.notNull";self.defaultMsg="errors.form.general.not_null";self.msg=msg?msg:self.defaultMsg;self.params=params;self.test=function(subject){if(subject!==self.params.value){throw{error:self.msg}}return true}};general.type=function(params,msg){var self=this;self.name="general.type";self.defaultMsg="errors.form.general.type";msg=msg?msg:self.defaultMsg;self.msg=msg;self.params=params;self.test=function(subject){if(self.params.type==="null"&&subject!==null||typeof subject!==self.params.type){throw{error:self.msg}}return true}};general.choice=function(params,msg){var self=this;self.name="general.choice";self.defaultMsg="errors.form.general.type";msg=msg?msg:self.defaultMsg;self.msg=msg;self.params=params;self.test=function(subject){if(_.indexOf(self.params.choices,subject)===-1){throw{error:msg}}return true}};return general}()},{underscore:15}],11:[function(require,module,exports){var moment=require("moment");module.exports=function(){"use strict";var date={};date.isValid=function(params,msg){var self=this;self.continueOnFail=false;self.defaultMsg="errors.form.date.invalid";self.msg=msg?msg:self.defaultMsg;self.params=params;self.test=function(subject){if(self.params.is_optional&&!subject){return true}if(!self.params.format_regex.test(subject)){throw{error:self.msg}}else if(!moment(subject,self.params.format).isValid()){throw{error:self.msg}}return true}};date.min=function(params,msg){var self=this;self.continueOnFail=false;self.defaultMsg="errors.form.date.min";self.msg=msg?msg:self.defaultMsg;self.params=params;self.test=function(subject){var subj_moment=moment(subject,self.params.format);if(subj_moment.diff(self.params.min,"days")<0){throw{error:self.msg,constraint:params.min}}return true}};date.max=function(params,msg){var self=this;self.continueOnFail=false;self.defaultMsg="errors.form.date.max";self.msg=msg?msg:self.defaultMsg;self.params=params;self.test=function(subject){var subj_moment=moment(subject,self.params.format);if(subj_moment.diff(self.params.max,"days")>0){throw{error:self.msg,constraint:params.max}}return true}};return date}()},{moment:14}],13:[function(require,module,exports){var _=require("underscore");module.exports=function(){"use strict";var collection={};collection.validate=function(params,msg){var self=this;self.name="collection.validate";self.defaultMsg="errors.form.collection.validate";msg=msg?msg:self.defaultMsg;self.msg=msg;self.params=params;self.test=function(entities){var i;for(i in entities){if(!params.validator.isEntityValid(entities[i])){throw{error:self.msg}}}return true}};collection.minLength=function(params,msg){var self=this;self.name="collection.minLength";self.defaultMsg="errors.form.collection.minLength";msg=msg?msg:self.defaultMsg;self.msg=msg;self.params=params;self.test=function(entities){if(entities.length<self.params.min){throw{error:self.msg}}return true}};collection.maxLength=function(params,msg){var self=this;self.name="collection.maxLength";self.defaultMsg="errors.form.collection.maxLength";msg=msg?msg:self.defaultMsg;self.msg=msg;self.params=params;self.test=function(entities){if(entities.length>self.params.max){throw{error:self.msg}}return true}};collection.unique=function(params,msg){var self=this;self.name="collection.unique";self.defaultMsg="errors.form.collection.unique";msg=msg?msg:self.defaultMsg;self.msg=msg;self.params=params;self.test=function(entities){var values,unique_values,property=self.params.property;values=_.map(entities,function(value,key,list){return value[property]()});unique_values=_.uniq(values);if(values.length!==unique_values.length){throw{error:self.msg}}return true}};return collection}()},{underscore:15}],15:[function(require,module,exports){(function(){(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.4.4";var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context)}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)===breaker)return}}else{for(var key in obj){if(_.has(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker)return}}}};_.map=_.collect=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)});return results};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}each(obj,function(value,index,list){if(!initial){memo=value;initial=true}else{memo=iterator.call(context,memo,value,index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}each(obj,function(value,index,list){index=keys?keys[--length]:--length;if(!initial){memo=obj[index];initial=true}else{memo=iterator.call(context,memo,obj[index],index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true}});return result};_.filter=_.select=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results[results.length]=value});return results};_.reject=function(obj,iterator,context){return _.filter(obj,function(value,index,list){return!iterator.call(context,value,index,list)},context)};_.every=_.all=function(obj,iterator,context){iterator||(iterator=_.identity);var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker});return!!result};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker});return!!result};_.contains=_.include=function(obj,target){if(obj==null)return false;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;return any(obj,function(value){return value===target})};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})};_.where=function(obj,attrs,first){if(_.isEmpty(attrs))return first?null:[];return _[first?"find":"filter"](obj,function(value){for(var key in attrs){if(attrs[key]!==value[key])return false}return true})};_.findWhere=function(obj,attrs){return _.where(obj,attrs,true)};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.max.apply(Math,obj)}if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity,value:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed})});return result.value};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.min.apply(Math,obj)}if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity,value:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})});return result.value};_.shuffle=function(obj){var rand;var index=0;var shuffled=[];each(obj,function(value){rand=_.random(index++);shuffled[index-1]=shuffled[rand];shuffled[rand]=value});return shuffled};var lookupIterator=function(value){return _.isFunction(value)?value:function(obj){return obj[value]}};_.sortBy=function(obj,value,context){var iterator=lookupIterator(value);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index<right.index?-1:1}),"value")};var group=function(obj,value,context,behavior){var result={};var iterator=lookupIterator(value||_.identity);each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)});return result};_.groupBy=function(obj,value,context){return group(obj,value,context,function(result,key,value){(_.has(result,key)?result[key]:result[key]=[]).push(value)})};_.countBy=function(obj,value,context){return group(obj,value,context,function(result,key){if(!_.has(result,key))result[key]=0;result[key]++})};_.sortedIndex=function(array,obj,iterator,context){iterator=iterator==null?_.identity:lookupIterator(iterator);var value=iterator.call(context,obj);var low=0,high=array.length;while(low<high){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return obj.length===+obj.length?obj.length:_.keys(obj).length};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;return n!=null&&!guard?slice.call(array,0,n):array[0]};_.initial=function(array,n,guard){return slice.call(array,0,array.length-(n==null||guard?1:n))};_.last=function(array,n,guard){if(array==null)return void 0;if(n!=null&&!guard){return slice.call(array,Math.max(array.length-n,0))}else{return array[array.length-1]}};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){each(input,function(value){if(_.isArray(value)){shallow?push.apply(output,value):flatten(value,shallow,output)}else{output.push(value)}});return output};_.flatten=function(array,shallow){return flatten(array,shallow,[])};_.without=function(array){return _.difference(array,slice.call(arguments,1))
};_.uniq=_.unique=function(array,isSorted,iterator,context){if(_.isFunction(isSorted)){context=iterator;iterator=isSorted;isSorted=false}var initial=iterator?_.map(array,iterator,context):array;var results=[];var seen=[];each(initial,function(value,index){if(isSorted?!index||seen[seen.length-1]!==value:!_.contains(seen,value)){seen.push(value);results.push(array[index])}});return results};_.union=function(){return _.uniq(concat.apply(ArrayProto,arguments))};_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})};_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){var args=slice.call(arguments);var length=_.max(_.pluck(args,"length"));var results=new Array(length);for(var i=0;i<length;i++){results[i]=_.pluck(args,""+i)}return results};_.object=function(list,values){if(list==null)return{};var result={};for(var i=0,l=list.length;i<l;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i=0,l=array.length;if(isSorted){if(typeof isSorted=="number"){i=isSorted<0?Math.max(0,l+isSorted):isSorted}else{i=_.sortedIndex(array,item);return array[i]===item?i:-1}}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;i<l;i++)if(array[i]===item)return i;return-1};_.lastIndexOf=function(array,item,from){if(array==null)return-1;var hasIndex=from!=null;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf){return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item)}var i=hasIndex?from:array.length;while(i--)if(array[i]===item)return i;return-1};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0}step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start;start+=step}return range};_.bind=function(func,context){if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));var args=slice.call(arguments,2);return function(){return func.apply(context,args.concat(slice.call(arguments)))}};_.partial=function(func){var args=slice.call(arguments,1);return function(){return func.apply(this,args.concat(slice.call(arguments)))}};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length===0)funcs=_.functions(obj);each(funcs,function(f){obj[f]=_.bind(obj[f],obj)});return obj};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))};_.throttle=function(func,wait){var context,args,timeout,result;var previous=0;var later=function(){previous=new Date;timeout=null;result=func.apply(context,args)};return function(){var now=new Date;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else if(!timeout){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var timeout,result;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)result=func.apply(context,args)};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)result=func.apply(context,args);return result}};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;memo=func.apply(this,arguments);func=null;return memo}};_.wrap=function(func,wrapper){return function(){var args=[func];push.apply(args,arguments);return wrapper.apply(this,args)}};_.compose=function(){var funcs=arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)]}return args[0]}};_.after=function(times,func){if(times<=0)return func();return function(){if(--times<1){return func.apply(this,arguments)}}};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)if(_.has(obj,key))keys[keys.length]=key;return keys};_.values=function(obj){var values=[];for(var key in obj)if(_.has(obj,key))values.push(obj[key]);return values};_.pairs=function(obj){var pairs=[];for(var key in obj)if(_.has(obj,key))pairs.push([key,obj[key]]);return pairs};_.invert=function(obj){var result={};for(var key in obj)if(_.has(obj,key))result[obj[key]]=key;return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){obj[prop]=source[prop]}}});return obj};_.pick=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));each(keys,function(key){if(key in obj)copy[key]=obj[key]});return copy};_.omit=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj){if(!_.contains(keys,key))copy[key]=obj[key]}return copy};_.defaults=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){if(obj[prop]==null)obj[prop]=source[prop]}}});return obj};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!=toString.call(b))return false;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return false;var length=aStack.length;while(length--){if(aStack[length]==a)return bStack[length]==b}aStack.push(a);bStack.push(b);var size=0,result=true;if(className=="[object Array]"){size=a.length;result=size==b.length;if(result){while(size--){if(!(result=eq(a[size],b[size],aStack,bStack)))break}}}else{var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)){return false}for(var key in a){if(_.has(a,key)){size++;if(!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break}}if(result){for(key in b){if(_.has(b,key)&&!size--)break}result=!size}}aStack.pop();bStack.pop();return result};_.isEqual=function(a,b){return eq(a,b,[],[])};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)=="[object Array]"};_.isObject=function(obj){return obj===Object(obj)};each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return!!(obj&&_.has(obj,"callee"))}}if(typeof/./!=="function"){_.isFunction=function(obj){return typeof obj==="function"}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.times=function(n,iterator,context){var accum=Array(n);for(var i=0;i<n;i++)accum[i]=iterator.call(context,i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){if(string==null)return"";return(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}});_.result=function(object,property){if(object==null)return null;var value=object[property];return _.isFunction(value)?value.call(object):value};_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]});if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}if(evaluate){source+="';\n"+evaluate+"\n__p+='"}index=offset+match.length;return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};template.source="function("+(settings.variable||"obj")+"){\n"+source+"}";return template};_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_);each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name=="shift"||name=="splice")&&obj.length===0)delete obj[0];return result.call(this,obj)}});each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}});_.extend(_.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this)})()},{}]},{},[1]);